exports.id=127,exports.ids=[127],exports.modules={3127:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>ReactApp});var a=s(784),r=s(9885),l=s.n(r),i=s(5666),n=s(986);let d=new n.KU,o="https://app.huffpalmer.fyi/v1",c="686d7df60026eca1ebb0";if(!o||!c)throw Error("Missing Appwrite configuration. Please check your .env file and ensure APPWRITE_ENDPOINT and APPWRITE_PROJECT_ID are set.");try{d.setEndpoint(o).setProject(c)}catch(e){throw e}let x=new n.mR(d),u=new n.Lg(d),m="688189ad000ad6dd9410",h="6882b76d00291718a514",g="6882b8790034f4058a94",b="6883a8c90016dd267443",p="6882c46c002e4d03f317",y="6882cf3f003528f846bc",j="68895a6c000b4fe3fdc5";var f=s(2451),w=s.n(f),k=s(9769),N=s(6624),v=s(4831),S=s(6021),C=s(3835),D=s(1322),$=s(8401),A=s(7646),I=s(9803),_=s(4227),E=s(5087),L=s(7854),R=s(5010);let T=(0,r.createContext)(void 0),useTheme=()=>{let e=(0,r.useContext)(T);if(!e)throw Error("useTheme must be used within a ThemeProvider");return e},ThemeProvider=({children:e})=>{let[t,s]=(0,r.useState)(()=>{let e=localStorage.getItem("darkMode");return!e||JSON.parse(e)});(0,r.useEffect)(()=>{t?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),localStorage.setItem("darkMode",JSON.stringify(t))},[t]);let logout=async()=>{try{await x.deleteSession("current")}catch(e){}};return a.jsx(T.Provider,{value:{darkMode:t,toggleDarkMode:()=>{s(e=>!e)},logout},children:e})},B=(0,r.createContext)(void 0),useAuth=()=>{let e=(0,r.useContext)(B);if(!e)throw Error("useAuth must be used within an AuthProvider");return e},AuthProvider=({children:e})=>{let[t,s]=(0,r.useState)(null),[l,i]=(0,r.useState)(!0);(0,r.useEffect)(()=>{let checkUserSession=async()=>{i(!0);try{let e=await x.get();if(s(e),e)try{await u.updateDocument(m,b,e.$id,{lastActive:new Date().toISOString()})}catch(e){}}catch(e){s(null)}finally{i(!1)}};checkUserSession()},[]);let login=async(e,t)=>{let a=await x.createEmailPasswordSession(e,t),r=await x.get();if(s(r),r)try{await u.updateDocument(m,b,r.$id,{lastActive:new Date().toISOString()})}catch(e){}return a},logout=async()=>{try{await x.deleteSession("current")}catch(e){}finally{s(null)}},refreshUser=async()=>{try{let e=await x.get();s(e)}catch(e){s(null)}},ensureUserDocument=async()=>{try{let e=await x.get();if(!e)return;try{await u.getDocument(m,b,e.$id);return}catch(s){let t=e.name.toLowerCase().includes("huff")||e.email.toLowerCase().includes("huff");try{await u.createDocument(m,b,e.$id,{name:e.name,email:e.email,role:"teacher",isRecommender:t,isAdmin:t,name_lowercase:e.name.toLowerCase()})}catch(t){if(409===t.code)try{await u.getDocument(m,b,e.$id)}catch(e){}}}}catch(e){}};return a.jsx(B.Provider,{value:{user:t,loading:l,login,logout,refreshUser,ensureUserDocument},children:e})},Tooltip=({text:e,children:t,position:s="top"})=>{let r=l().useId(),i=`
    [data-tooltip-id="${r}"] [data-tooltip-content] {
      opacity: 0;
      transition: opacity 300ms;
    }
    [data-tooltip-id="${r}"]:hover [data-tooltip-content] {
      opacity: 1;
    }
  `;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{"data-tooltip-id":r,className:"relative inline-flex items-center",children:[t,a.jsx("div",{className:`absolute ${(()=>{switch(s){case"bottom":return"top-full mt-2";case"left":return"right-full mr-2";case"right":return"left-full ml-2";default:return"bottom-full mb-2"}})()} w-max max-w-xs bg-gray-800 text-white text-xs rounded py-1 px-2 pointer-events-none z-10`,"data-tooltip-content":!0,children:e})]}),a.jsx("style",{children:i})]})},LoadingBar=({isLoading:e})=>e?(0,a.jsxs)("div",{className:"fixed top-0 left-0 right-0 z-50",children:[a.jsx("div",{className:"h-1 bg-gray-200 dark:bg-gray-700",children:a.jsx("div",{className:"h-full bg-sky-600",style:{animation:"loadingBar 2s ease-in-out infinite"}})}),a.jsx("style",{children:`
        @keyframes loadingBar {
          0% {
            width: 0%;
            transform: translateX(0);
          }
          50% {
            width: 70%;
            transform: translateX(15%);
          }
          100% {
            width: 100%;
            transform: translateX(0);
          }
        }
      `})]}):null;var F=s(5833),P=s(2446);let Z=[{value:"bug",label:"Issue/Bug"},{value:"feature",label:"Feature/Enhancement"},{value:"question",label:"Question"},{value:"other",label:"Other"}],FeedbackModal=({isOpen:e,onClose:t})=>{let[s,l]=(0,r.useState)({name:"",category:"bug",description:""}),[i,d]=(0,r.useState)(!1),[o,c]=(0,r.useState)(!1),handleInputChange=e=>{let{name:t,value:s}=e.target;l(e=>({...e,[t]:s}))},handleSubmit=async e=>{if(e.preventDefault(),s.category&&s.description.trim()){d(!0);try{let e={name:s.name.trim()||"Anonymous",category:s.category,description:s.description.trim(),submitted_at:new Date().toISOString(),status:"new"};await u.createDocument(m,j,n.ID.unique(),e),console.log("Feedback submitted successfully:",e),c(!0),setTimeout(()=>{l({name:"",category:"",description:""}),c(!1),t()},2e3)}catch(e){console.error("Error submitting feedback:",e),e.response&&console.error("Appwrite API Error Response:",e.response),alert(`Failed to submit feedback: ${e.message||"Unknown error"}. Please check the console for details.`)}finally{d(!1)}}},handleClose=()=>{i||(l({name:"",category:"",description:""}),c(!1),t())};return e?a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"bg-white dark:bg-neutral-800 rounded-lg shadow-xl w-full max-w-md",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-neutral-700",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[a.jsx(A.Z,{className:"w-5 h-5 text-sky-600 mr-2"}),a.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-gray-200",children:"Send Feedback"})]}),a.jsx("button",{onClick:handleClose,disabled:i,className:"p-1 hover:bg-gray-100 dark:hover:bg-neutral-700 rounded-full transition-colors disabled:opacity-50",children:a.jsx(F.Z,{className:"w-5 h-5 text-gray-500 dark:text-gray-400"})})]}),a.jsx("div",{className:"p-6",children:o?(0,a.jsxs)("div",{className:"text-center py-8",children:[a.jsx("div",{className:"w-16 h-16 bg-green-100 dark:bg-green-900/20 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx(P.Z,{className:"w-8 h-8 text-green-600 dark:text-green-400"})}),a.jsx("h3",{className:"text-lg font-medium text-gray-800 dark:text-gray-200 mb-2",children:"Thank you!"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Your feedback has been submitted successfully."})]}):(0,a.jsxs)("form",{onSubmit:handleSubmit,className:"space-y-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Name (optional)"}),a.jsx("input",{type:"text",id:"name",name:"name",value:s.name,onChange:handleInputChange,disabled:i,className:"w-full px-3 py-2 border border-gray-300 dark:border-neutral-600 rounded-md bg-white dark:bg-neutral-700 text-gray-900 dark:text-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50",placeholder:"Your name"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Category ",a.jsx("span",{className:"text-red-500",children:"*"})]}),(0,a.jsxs)("select",{id:"category",name:"category",value:s.category,onChange:handleInputChange,disabled:i,required:!0,className:"w-full px-3 py-2 border border-gray-300 dark:border-neutral-600 rounded-md bg-white dark:bg-neutral-700 text-gray-900 dark:text-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50",children:[a.jsx("option",{value:"",children:"Select a category"}),Z.map(e=>a.jsx("option",{value:e.value,children:e.label},e.value))]})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Description ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("textarea",{id:"description",name:"description",value:s.description,onChange:handleInputChange,disabled:i,required:!0,rows:4,className:"w-full px-3 py-2 border border-gray-300 dark:border-neutral-600 rounded-md bg-white dark:bg-neutral-700 text-gray-900 dark:text-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 resize-none",placeholder:"Please describe your feedback in detail..."})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[a.jsx("button",{type:"button",onClick:handleClose,disabled:i,className:"px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-neutral-700 rounded-md transition-colors disabled:opacity-50",children:"Cancel"}),a.jsx("button",{type:"submit",disabled:i||!s.category||!s.description.trim(),className:"px-4 py-2 bg-sky-600 text-white rounded-md hover:bg-sky-800 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center",children:i?(0,a.jsxs)(a.Fragment,{children:[a.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Submitting..."]}):(0,a.jsxs)(a.Fragment,{children:[a.jsx(P.Z,{className:"w-4 h-4 mr-2"}),"Submit Feedback"]})})]})]})})]})}):null},Header=({title:e,showBackButton:t=!1,onBack:s,showSettingsButton:l=!0,showSignoutButton:d=!0,showSearch:o=!1,showInfoButton:c=!1,showLoginButton:x=!1,isLoading:g=!1,hideIssuesButton:p=!1})=>{let[y,j]=(0,r.useState)(!1),f=(0,i.useNavigate)(),{darkMode:T,toggleDarkMode:B}=useTheme(),{user:F,logout:P}=useAuth(),[Z,H]=(0,r.useState)(""),[M,U]=(0,r.useState)([]),[q,O]=(0,r.useState)(!1),[V,z]=(0,r.useState)(!1),[W,G]=(0,r.useState)(null),[K,Y]=(0,r.useState)(null);(0,r.useEffect)(()=>{if(x&&!F){u.listDocuments(m,b,[]).then(e=>{G(e.total)}).catch(()=>G(null));let e=new Date(Date.now()-6e5).toISOString();u.listDocuments(m,b,[n.AE.greaterThan("lastActive",e)]).then(e=>{Y(e.total)}).catch(()=>Y(null))}},[x,F]);let handleLogout=async()=>{try{await P()}catch(e){console.log("Logout error (ignoring):",e)}finally{f("/")}};(0,r.useEffect)(()=>{let e=setTimeout(async()=>{if(Z.trim()){O(!0);try{let e=await u.listDocuments(m,h,[n.AE.equal("wishlist_key",Z.trim())]);U(e.documents)}catch(e){console.error("Error searching wishlists:",e),U([])}finally{O(!1)}}else U([])},300);return()=>{clearTimeout(e)}},[Z]);let handleResultClick=e=>{f(`/wishlist/${e}`),H(""),U([])};return(0,a.jsxs)(a.Fragment,{children:[a.jsx(LoadingBar,{isLoading:g}),a.jsx("nav",{className:"bg-white dark:bg-neutral-800 shadow-sm border-b border-neutral-200 dark:border-neutral-700",children:(0,a.jsxs)("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center py-4",children:[(0,a.jsxs)("div",{className:"flex items-center w-full",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3 flex-1",children:[a.jsx(w(),{src:"/logo.png",alt:"wiSHlist Logo",width:32,height:32,className:"w-8 h-8 rounded-lg"}),a.jsx("h1",{className:"text-xl font-bold text-gray-800 dark:text-gray-200",children:e})]}),o&&(0,a.jsxs)("div",{className:"relative flex items-center mx-4",children:[a.jsx("input",{type:"text",value:Z,onChange:e=>H(e.target.value),onKeyDown:e=>{"Enter"===e.key&&M.length>0?(f(`/wishlist/${M[0].wishlist_key}`),H(""),U([])):"Enter"===e.key&&Z.trim()&&(f(`/wishlist/${Z.trim()}`),H(""),U([]))},className:"px-3 py-1 rounded-lg text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-200 w-40 xs:w-60 pl-9 focus:outline-none",placeholder:"Find a wiSHlist"}),a.jsx("div",{className:"absolute left-0 p-2",children:a.jsx(k.Z,{className:"w-4 h-4 xs:w-5 xs:h-5 text-gray-600 dark:text-gray-300"})}),q&&Z.trim()&&a.jsx("div",{className:"absolute z-10 w-full bg-white dark:bg-neutral-800 shadow-lg rounded-b-lg border border-t-0 border-gray-300 dark:border-neutral-700 p-2 text-sm text-gray-600 dark:text-gray-300 top-full left-0",children:"Searching..."}),!q&&Z.trim()&&M.length>0&&a.jsx("div",{className:"absolute z-10 w-full bg-white dark:bg-neutral-800 shadow-lg rounded-b-lg border border-t-0 border-gray-300 dark:border-neutral-700 mt-1 max-h-60 overflow-y-auto top-full left-0",children:M.map(e=>a.jsx("div",{onClick:()=>handleResultClick(e.wishlist_key),className:"p-2 cursor-pointer hover:bg-neutral-100 dark:hover:bg-neutral-700 text-gray-900 dark:text-gray-200",children:e.wishlist_name||e.wishlist_key},e.wishlist_key))}),!q&&Z.trim()&&0===M.length&&a.jsx("div",{className:"absolute z-10 w-full bg-white dark:bg-neutral-800 shadow-lg rounded-b-lg border border-t-0 border-gray-300 dark:border-neutral-700 p-2 text-sm text-gray-600 dark:text-gray-300 top-full left-0",children:"No wishlists found."})]})]}),a.jsx("div",{className:"xs:hidden flex items-center",children:a.jsx("button",{onClick:()=>j(!y),className:"p-2 rounded-full hover:bg-neutral-200 dark:hover:bg-neutral-700 focus:outline-none",children:a.jsx(N.Z,{className:"w-6 h-6 text-gray-700 dark:text-gray-200"})})}),(0,a.jsxs)("div",{className:"hidden xs:flex items-center space-x-4 relative",children:[" ",t&&F&&a.jsx(Tooltip,{text:"Back to Dashboard",position:"bottom",children:a.jsx("button",{onClick:()=>f("/dashboard"),className:"p-2 rounded-full hover:bg-neutral-200 dark:hover:bg-neutral-700",children:a.jsx(v.Z,{className:"w-5 h-5 text-gray-600 dark:text-gray-300"})})}),t&&!F&&a.jsx(Tooltip,{text:"Back to wiSHlist",position:"bottom",children:a.jsx("button",{onClick:s,className:"p-2 rounded-full hover:bg-neutral-200 dark:hover:bg-neutral-700",children:a.jsx(S.Z,{className:"w-5 h-5 text-gray-600 dark:text-gray-300"})})}),l&&F&&a.jsx(Tooltip,{text:"Settings",position:"bottom",children:a.jsx("button",{onClick:()=>f("/settings"),className:"p-2 rounded-full hover:bg-neutral-200 dark:hover:bg-neutral-700",children:a.jsx(C.Z,{className:"w-5 h-5 text-gray-600 dark:text-gray-300"})})}),c&&a.jsx(Tooltip,{text:"About",position:"bottom",children:a.jsx("button",{onClick:()=>f("/about"),className:"p-2 rounded-full hover:bg-neutral-200 dark:hover:bg-neutral-700",children:a.jsx(D.Z,{className:"w-5 h-5 text-gray-600 dark:text-gray-300"})})}),x&&!F&&"Sign In"!==e&&a.jsx(Tooltip,{text:"Sign In",position:"bottom",children:a.jsx("button",{onClick:()=>f("/"),className:"p-2 rounded-full hover:bg-neutral-200 dark:hover:bg-neutral-700",children:a.jsx($.Z,{className:"w-5 h-5 text-gray-600 dark:text-gray-300"})})}),a.jsx(Tooltip,{text:"Send Feedback",position:"bottom",children:a.jsx("button",{onClick:()=>z(!0),className:"p-2 rounded-full hover:bg-neutral-200 dark:hover:bg-neutral-700",children:a.jsx(A.Z,{className:"w-5 h-5 text-gray-600 dark:text-gray-300"})})}),!p&&a.jsx(Tooltip,{text:"Current Issues",position:"bottom",children:a.jsx("button",{onClick:()=>f("/issues"),className:"p-2 rounded-full hover:bg-neutral-200 dark:hover:bg-neutral-700",children:a.jsx(I.Z,{className:"w-5 h-5 text-gray-600 dark:text-gray-300"})})}),a.jsx(Tooltip,{text:T?"Switch to Light Mode":"Switch to Dark Mode",position:"bottom",children:a.jsx("button",{onClick:B,className:"p-2 rounded-full hover:bg-neutral-200 dark:hover:bg-neutral-700",children:T?a.jsx(_.Z,{className:"w-5 h-5 text-yellow-400"}):a.jsx(E.Z,{className:"w-5 h-5 text-gray-600"})})}),d&&F&&a.jsx(Tooltip,{text:"Sign Out",position:"bottom",children:a.jsx("button",{onClick:handleLogout,className:"p-2 rounded-full hover:bg-neutral-200 dark:hover:bg-neutral-700",children:a.jsx(L.Z,{className:"w-5 h-5 text-red-600"})})})]})]}),y&&(0,a.jsxs)("div",{className:"xs:hidden absolute top-16 right-4 z-50 w-56 bg-white dark:bg-neutral-800 rounded-lg shadow-lg border border-neutral-200 dark:border-neutral-700 flex flex-col py-2 animate-fade-in",children:[t&&F&&(0,a.jsxs)("button",{onClick:()=>{j(!1),f("/dashboard")},className:"flex items-center px-4 py-2 hover:bg-neutral-100 dark:hover:bg-neutral-700 w-full text-left text-gray-700 dark:text-gray-200",children:[a.jsx(v.Z,{className:"w-5 h-5 mr-3 text-gray-600 dark:text-gray-300"})," Dashboard"]}),t&&!F&&(0,a.jsxs)("button",{onClick:()=>{j(!1),s&&s()},className:"flex items-center px-4 py-2 hover:bg-neutral-100 dark:hover:bg-neutral-700 w-full text-left text-gray-700 dark:text-gray-200",children:[a.jsx(S.Z,{className:"w-5 h-5 mr-3 text-gray-600 dark:text-gray-300"})," wiSHlist"]}),l&&F&&(0,a.jsxs)("button",{onClick:()=>{j(!1),f("/settings")},className:"flex items-center px-4 py-2 hover:bg-neutral-100 dark:hover:bg-neutral-700 w-full text-left text-gray-700 dark:text-gray-200",children:[a.jsx(C.Z,{className:"w-5 h-5 mr-3 text-gray-600 dark:text-gray-300"})," Settings"]}),c&&(0,a.jsxs)("button",{onClick:()=>{j(!1),f("/about")},className:"flex items-center px-4 py-2 hover:bg-neutral-100 dark:hover:bg-neutral-700 w-full text-left text-gray-700 dark:text-gray-200",children:[a.jsx(D.Z,{className:"w-5 h-5 mr-3 text-gray-600 dark:text-gray-300"})," About"]}),x&&!F&&"Sign In"!==e&&(0,a.jsxs)("button",{onClick:()=>{j(!1),f("/")},className:"flex items-center px-4 py-2 hover:bg-neutral-100 dark:hover:bg-neutral-700 w-full text-left text-gray-700 dark:text-gray-200",children:[a.jsx($.Z,{className:"w-5 h-5 mr-3 text-gray-600 dark:text-gray-300"})," Sign In"]}),(0,a.jsxs)("button",{onClick:()=>{j(!1),z(!0)},className:"flex items-center px-4 py-2 hover:bg-neutral-100 dark:hover:bg-neutral-700 w-full text-left text-gray-700 dark:text-gray-200",children:[a.jsx(A.Z,{className:"w-5 h-5 mr-3 text-gray-600 dark:text-gray-300"})," Send Feedback"]}),!p&&(0,a.jsxs)("button",{onClick:()=>{j(!1),f("/issues")},className:"flex items-center px-4 py-2 hover:bg-neutral-100 dark:hover:bg-neutral-700 w-full text-left text-gray-700 dark:text-gray-200",children:[a.jsx(I.Z,{className:"w-5 h-5 mr-3 text-gray-600 dark:text-gray-300"})," Current Issues"]}),(0,a.jsxs)("button",{onClick:()=>{j(!1),B()},className:"flex items-center px-4 py-2 hover:bg-neutral-100 dark:hover:bg-neutral-700 w-full text-left text-gray-700 dark:text-gray-200",children:[T?a.jsx(_.Z,{className:"w-5 h-5 mr-3 text-yellow-400"}):a.jsx(E.Z,{className:"w-5 h-5 mr-3 text-gray-600"})," ",T?"Light Mode":"Dark Mode"]}),d&&F&&(0,a.jsxs)("button",{onClick:()=>{j(!1),handleLogout()},className:"flex items-center px-4 py-2 hover:bg-neutral-100 dark:hover:bg-neutral-700 w-full text-left text-gray-700 dark:text-gray-200",children:[a.jsx(L.Z,{className:"w-5 h-5 mr-3 text-red-600"})," Sign Out"]})]})]})}),x&&!F&&a.jsx("div",{className:"w-full flex justify-center mt-2 mb-1",children:(0,a.jsxs)("div",{className:"flex flex-row items-center space-x-4 w-full max-w-md",children:[(0,a.jsxs)("span",{className:"inline-flex items-center gap-1 text-sm font-bold text-blue-800 dark:text-blue-200 bg-blue-100 dark:bg-blue-900/60 px-2 py-0.5 rounded-md shadow-sm tracking-wide uppercase flex-1 justify-center",children:[a.jsx(R.Z,{className:"w-4 h-4 mr-1 text-blue-700 dark:text-blue-200"})," Registered: ",a.jsx("span",{className:"ml-1 text-blue-900 dark:text-blue-100 text-lg font-extrabold",children:null!==W?W:"..."})]}),(0,a.jsxs)("span",{className:"inline-flex items-center gap-1 text-sm font-bold text-green-800 dark:text-green-200 bg-green-100 dark:bg-green-900/60 px-2 py-0.5 rounded-md shadow-sm tracking-wide uppercase flex-1 justify-center",children:[a.jsx("span",{className:"text-base",children:"\uD83D\uDFE2"})," Active: ",a.jsx("span",{className:"ml-1 text-green-900 dark:text-green-100 text-lg font-extrabold",children:null!==K?K:"..."})]})]})}),a.jsx(FeedbackModal,{isOpen:V,onClose:()=>z(!1)})]})},TeacherRegistrationInfo=()=>(0,a.jsxs)("div",{className:"w-full bg-yellow-50 dark:bg-yellow-900/40 border border-yellow-200 dark:border-yellow-700 text-yellow-900 dark:text-yellow-100 rounded-md px-3 py-3 flex flex-col items-center justify-center text-center shadow-sm text-base mt-2",children:[a.jsx("span",{className:"font-semibold mb-1 text-lg",children:"Teachers:"}),a.jsx("span",{className:"mb-1",children:"Interested in registering?"}),a.jsx("a",{href:"mailto:shuff@chicousd.org",className:"underline font-semibold break-all mb-1",children:"Contact: shuff@chicousd.org"}),a.jsx("span",{className:"block mt-1 text-sm text-yellow-800 dark:text-yellow-200",children:"Registration is limited for testing."})]}),LoginView=()=>{let{ensureUserDocument:e}=useAuth(),t=(0,i.useNavigate)(),[s,l]=(0,r.useState)(""),[d,o]=(0,r.useState)(""),[c,u]=(0,r.useState)(""),[m,h]=(0,r.useState)(!1),handleEmailLogin=async t=>{t.preventDefault(),h(!0),u("");try{try{await x.deleteSession("current")}catch(e){}await x.createEmailPasswordSession(s,d),await e(),window.location.href="/dashboard"}catch(e){console.error("Email login error:",e),e instanceof n.dP?u(e.message):u("An unexpected error occurred during login."),h(!1)}},handleGoogleLogin=async()=>{h(!0);try{try{await x.deleteSession("current")}catch(e){}await x.createOAuth2Session(n.O4.Google,`${window.location.origin}/?redirect=dashboard&auth_time=${Date.now()}`,`${window.location.origin}/`)}catch(e){e instanceof n.dP?u(e.message):u("An unexpected error occurred."),h(!1)}};return(0,a.jsxs)("div",{className:"min-h-screen bg-neutral-100 dark:bg-neutral-900",children:[a.jsx(Header,{title:"Sign In",showSettingsButton:!1,showSignoutButton:!1,showInfoButton:!0,isLoading:m,showLoginButton:!0,showBackButton:!0,onBack:()=>{t("/supporter")}}),(0,a.jsxs)("div",{className:"relative flex flex-col items-center justify-start pt-1 p-4 w-full min-h-[calc(100vh-80px)]",children:[(0,a.jsxs)("div",{className:"z-10 bg-white dark:bg-neutral-800 rounded-xl shadow-lg p-8 w-full max-w-md flex flex-col justify-center mx-auto",children:[(0,a.jsxs)("div",{className:"text-center mb-6",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-gray-100",children:"Classroom wiSHlist"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:"Supporting your student's favorite teacher"})]}),c&&a.jsx("div",{className:"bg-red-100 dark:bg-red-900 border border-red-400 text-red-700 dark:text-red-200 px-4 py-3 rounded-lg text-sm mb-4",children:c}),(0,a.jsxs)("form",{onSubmit:handleEmailLogin,className:"space-y-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Email"}),a.jsx("input",{id:"email",type:"email",value:s,onChange:e=>l(e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-sky-500 focus:border-sky-500 bg-white dark:bg-neutral-700 text-gray-900 dark:text-gray-200",placeholder:"Enter your email",required:!0,disabled:m})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Password"}),a.jsx("input",{id:"password",type:"password",value:d,onChange:e=>o(e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-sky-500 focus:border-sky-500 bg-white dark:bg-neutral-700 text-gray-900 dark:text-gray-200",placeholder:"Enter your password",required:!0,disabled:m})]}),a.jsx("button",{type:"submit",className:"w-full bg-sky-600 text-white py-2 px-4 rounded-lg hover:bg-sky-700 transition duration-200 font-medium disabled:bg-gray-200 dark:disabled:bg-gray-500",disabled:m,children:m?"Signing in...":"Sign in with Email"})]}),(0,a.jsxs)("div",{className:"relative mt-6",children:[a.jsx("div",{className:"absolute inset-0 flex items-center",children:a.jsx("div",{className:"w-full border-t border-gray-300 dark:border-gray-600"})}),a.jsx("div",{className:"relative flex justify-center text-sm",children:a.jsx("span",{className:"px-2 bg-white dark:bg-neutral-800 text-gray-500 dark:text-gray-400",children:"or"})})]}),(0,a.jsxs)("div",{className:"mt-6",children:[(0,a.jsxs)("button",{onClick:handleGoogleLogin,className:"w-full bg-gray-200 dark:bg-neutral-700 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-200 py-2 px-4 rounded-lg hover:bg-gray-300 dark:hover:bg-neutral-600 transition duration-200 font-medium flex items-center justify-center space-x-2 disabled:bg-gray-200 dark:disabled:bg-gray-500",disabled:m,children:[(0,a.jsxs)("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[a.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),a.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),a.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),a.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),a.jsx("span",{children:m?"Processing...":"Sign in with Google"})]}),(0,a.jsxs)("div",{className:"mt-4 text-center text-sm text-gray-500 dark:text-gray-400",children:["Are you a supporter? ",a.jsx(i.Link,{to:"/supporter",className:"text-sky-600 hover:underline",children:"Find a wiSHlist"})]}),a.jsx("div",{className:"mt-6",children:a.jsx(TeacherRegistrationInfo,{})})]})]}),a.jsx("div",{className:"flex md:hidden mt-6 w-full max-w-md",children:a.jsx(TeacherRegistrationInfo,{})})]})]})},RegisterView=()=>{let[e,t]=(0,r.useState)({name:"",email:"",password:""}),[s,l]=(0,r.useState)("loading"),[d,o]=(0,r.useState)(""),[c,h]=(0,r.useState)(!1),[g,y]=(0,r.useState)(null),[j,f]=(0,r.useState)(null),w=(0,i.useNavigate)(),k=(0,i.useLocation)(),{refreshUser:N}=useAuth();(0,r.useEffect)(()=>{let validateToken=async()=>{let e=new URLSearchParams(k.search),t=e.get("token");if(!t){l("error"),o("Invalid registration link: No token provided.");return}try{let e=await u.getDocument(m,p,t);if(new Date>new Date(e.expiresAt)){l("error"),o("Registration link has expired.");return}f(e),y(t),l("valid")}catch(e){l("error"),o("Invalid or expired registration link.")}};validateToken()},[k.search]);let handleRegister=async t=>{if(t.preventDefault(),!g||!j){o("Registration token is not valid.");return}o(""),h(!0);try{try{await x.deleteSession("current")}catch{}let t=await x.create(n.ID.unique(),e.email,e.password,e.name);await u.createDocument(m,b,t.$id,{name:e.name,email:e.email,role:"teacher",isRecommender:j.isRecommender,isAdmin:j.isAdmin,userID:j.userID,name_lowercase:e.name.toLowerCase()}),await x.createEmailPasswordSession(e.email,e.password),await N(),await u.deleteDocument(m,p,g),w("/dashboard")}catch(e){e instanceof n.dP?o(e.message):o("An unexpected error occurred.")}finally{h(!1)}},handleGoogleRegister=async()=>{if(g){h(!0);try{try{await x.deleteSession("current")}catch{}x.createOAuth2Session(n.O4.Google,`${window.location.origin}/dashboard`,`${window.location.origin}/`)}catch(e){o("Could not start Google registration.")}finally{h(!1)}}},handleRegisterFormChange=e=>{let{name:s,value:a}=e.target;t(e=>({...e,[s]:a}))};return"loading"===s?a.jsx("div",{className:"min-h-screen bg-neutral-100 dark:bg-neutral-900 flex items-center justify-center p-4",children:a.jsx("div",{className:"bg-white dark:bg-neutral-800 rounded-xl shadow-lg p-8 w-full max-w-md text-center",children:a.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-gray-100",children:"Validating Invitation..."})})}):"error"===s?a.jsx("div",{className:"min-h-screen bg-neutral-100 dark:bg-neutral-900 flex items-center justify-center p-4",children:(0,a.jsxs)("div",{className:"bg-white dark:bg-neutral-800 rounded-xl shadow-lg p-8 w-full max-w-md text-center",children:[a.jsx("h1",{className:"text-2xl font-bold text-red-600",children:"Error"}),a.jsx("p",{className:"text-gray-700 dark:text-gray-300 mt-4",children:d})]})}):(0,a.jsxs)("div",{className:"min-h-screen bg-neutral-100 dark:bg-neutral-900",children:[a.jsx(Header,{title:"Register",showSettingsButton:!1,showSignoutButton:!1,showInfoButton:!0,isLoading:c}),a.jsx("div",{className:"flex items-center justify-center p-4",children:(0,a.jsxs)("div",{className:"bg-white dark:bg-neutral-800 rounded-xl shadow-lg p-8 w-full max-w-md",children:[a.jsx("div",{className:"text-center mb-6",children:a.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-gray-100",children:"Teacher Registration"})}),a.jsx("form",{onSubmit:handleRegister,children:(0,a.jsxs)("div",{className:"space-y-4",children:[d&&a.jsx("div",{className:"bg-red-100 dark:bg-red-900 border border-red-400 text-red-700 dark:text-red-200 px-4 py-3 rounded-lg text-sm",children:d}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Name"}),a.jsx("input",{type:"text",name:"name",value:e.name,onChange:handleRegisterFormChange,className:"w-full px-4 py-2 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-200 focus:outline-none",placeholder:"Your Name",required:!0,disabled:c})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email"}),a.jsx("input",{type:"email",name:"email",value:e.email,onChange:handleRegisterFormChange,className:"w-full px-4 py-2 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-200 focus:outline-none",placeholder:"your-email@example.com",required:!0,disabled:c})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Password"}),a.jsx("input",{type:"password",name:"password",value:e.password,onChange:handleRegisterFormChange,className:"w-full px-4 py-2 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-200 focus:outline-none",placeholder:"••••••••",required:!0,disabled:c})]}),a.jsx("button",{type:"submit",className:"w-full bg-sky-600 text-white py-2 px-4 rounded-lg hover:bg-sky-800 disabled:bg-sky-400",disabled:c,children:c?"Registering...":"Register"})]})}),(0,a.jsxs)("div",{className:"mt-6",children:[(0,a.jsxs)("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-0 flex items-center",children:a.jsx("div",{className:"w-full border-t border-gray-300 dark:border-gray-600"})}),a.jsx("div",{className:"relative flex justify-center text-sm",children:a.jsx("span",{className:"px-2 bg-white dark:bg-gray-800 text-gray-500 dark:text-gray-400",children:"Or"})})]}),a.jsx("div",{className:"mt-6",children:(0,a.jsxs)("button",{onClick:handleGoogleRegister,className:"w-full bg-gray-200 dark:bg-neutral-700 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-200 py-2 px-4 rounded-lg hover:bg-gray-300 dark:hover:bg-neutral-600 transition duration-200 font-medium flex items-center justify-center space-x-2 disabled:bg-gray-200 dark:disabled:bg-gray-500",disabled:c,children:[(0,a.jsxs)("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[a.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),a.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),a.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),a.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),a.jsx("span",{children:c?"Processing...":"Register with Google"})]})})]})]})})]})},AboutView=()=>{let{user:e}=useAuth(),t=!!e,s=(0,i.useNavigate)();return(0,a.jsxs)("div",{className:"min-h-screen bg-neutral-100 dark:bg-neutral-900",children:[a.jsx(Header,{title:"About",showSettingsButton:!0,showSignoutButton:!0,showLoginButton:!t,showBackButton:!0,onBack:()=>s(-1)}),(0,a.jsxs)("div",{className:"max-w-4xl mx-auto px-4 pb-12 pt-8",children:[(0,a.jsxs)("div",{className:"bg-white dark:bg-neutral-800 rounded-xl shadow-lg p-6 mb-6",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-gray-100 mb-4",children:"\uD83D\uDCD6 About wiSHlist"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"wiSHlist is a modern, user-friendly wishlist application designed specifically for teachers to create and share classroom supply wishlists with supporters. Built with React, TypeScript, and Appwrite, it empowers educators to create organized wishlists of classroom supplies and materials, making it easy for parents, community members, and supporters to contribute to student success."})]}),(0,a.jsxs)("div",{className:"space-y-6 xl:space-y-0 xl:grid xl:grid-cols-2 xl:gap-6",children:[(0,a.jsxs)("div",{className:"bg-white dark:bg-neutral-800 rounded-xl shadow-lg p-6",children:[a.jsx("h3",{className:"text-xl font-semibold text-gray-800 dark:text-gray-100 mb-4",children:"✨ For Teachers"}),(0,a.jsxs)("ul",{className:"space-y-2 text-gray-600 dark:text-gray-400",children:[(0,a.jsxs)("li",{className:"flex items-start",children:[a.jsx("span",{className:"text-sky-600 mr-2",children:"\uD83D\uDCCB"}),(0,a.jsxs)("span",{children:[a.jsx("strong",{children:"Wishlist Management:"})," Create and manage multiple wishlists with drag-and-drop reordering"]})]}),(0,a.jsxs)("li",{className:"flex items-start",children:[a.jsx("span",{className:"text-sky-600 mr-2",children:"\uD83C\uDFA8"}),(0,a.jsxs)("span",{children:[a.jsx("strong",{children:"Customizable Items:"})," Add items with names, descriptions, store links, and estimated costs"]})]}),(0,a.jsxs)("li",{className:"flex items-start",children:[a.jsx("span",{className:"text-sky-600 mr-2",children:"\uD83D\uDC65"}),(0,a.jsxs)("span",{children:[a.jsx("strong",{children:"User Management:"})," Invite and manage recommenders and administrators"]})]}),(0,a.jsxs)("li",{className:"flex items-start",children:[a.jsx("span",{className:"text-sky-600 mr-2",children:"\uD83D\uDCCA"}),(0,a.jsxs)("span",{children:[a.jsx("strong",{children:"Contribution Tracking:"})," Monitor which items have been purchased and by how many contributors"]})]}),(0,a.jsxs)("li",{className:"flex items-start",children:[a.jsx("span",{className:"text-sky-600 mr-2",children:"\uD83D\uDD17"}),(0,a.jsxs)("span",{children:[a.jsx("strong",{children:"Easy Sharing:"})," Generate shareable links and keys for public wishlist access"]})]})]})]}),(0,a.jsxs)("div",{className:"bg-white dark:bg-neutral-800 rounded-xl shadow-lg p-6",children:[a.jsx("h3",{className:"text-xl font-semibold text-gray-800 dark:text-gray-100 mb-4",children:"\uD83D\uDECD️ For Supporters"}),(0,a.jsxs)("ul",{className:"space-y-2 text-gray-600 dark:text-gray-400",children:[(0,a.jsxs)("li",{className:"flex items-start",children:[a.jsx("span",{className:"text-sky-600 mr-2",children:"\uD83D\uDD0D"}),(0,a.jsxs)("span",{children:[a.jsx("strong",{children:"Easy Browsing:"})," View wishlists in list or grid layout"]})]}),(0,a.jsxs)("li",{className:"flex items-start",children:[a.jsx("span",{className:"text-sky-600 mr-2",children:"\uD83D\uDCDD"}),(0,a.jsxs)("span",{children:[a.jsx("strong",{children:"Item Details:"})," See item descriptions, costs, and store links"]})]}),(0,a.jsxs)("li",{className:"flex items-start",children:[a.jsx("span",{className:"text-sky-600 mr-2",children:"✅"}),(0,a.jsxs)("span",{children:[a.jsx("strong",{children:"Purchase Tracking:"})," Mark items as purchased to prevent duplicates"]})]}),(0,a.jsxs)("li",{className:"flex items-start",children:[a.jsx("span",{className:"text-sky-600 mr-2",children:"\uD83C\uDF10"}),(0,a.jsxs)("span",{children:[a.jsx("strong",{children:"Direct Links:"})," Quick access to store pages for purchasing"]})]}),(0,a.jsxs)("li",{className:"flex items-start",children:[a.jsx("span",{className:"text-sky-600 mr-2",children:"\uD83D\uDCA1"}),(0,a.jsxs)("span",{children:[a.jsx("strong",{children:"Suggestions:"})," Recommend new items to teachers"]})]})]})]})]}),(0,a.jsxs)("div",{className:"bg-white dark:bg-neutral-800 rounded-xl shadow-lg p-6 mt-6",children:[a.jsx("h3",{className:"text-xl font-semibold text-gray-800 dark:text-gray-100 mb-4",children:"\uD83D\uDD27 Technical Features"}),(0,a.jsxs)("div",{className:"grid sm:grid-cols-2 gap-4 text-gray-600 dark:text-gray-400",children:[(0,a.jsxs)("div",{className:"flex items-start",children:[a.jsx("span",{className:"text-sky-600 mr-2",children:"\uD83C\uDF19"}),(0,a.jsxs)("span",{children:[a.jsx("strong",{children:"Dark/Light Mode:"})," Automatic theme switching"]})]}),(0,a.jsxs)("div",{className:"flex items-start",children:[a.jsx("span",{className:"text-sky-600 mr-2",children:"\uD83D\uDD10"}),(0,a.jsxs)("span",{children:[a.jsx("strong",{children:"Secure Authentication:"})," User registration and login with Appwrite"]})]}),(0,a.jsxs)("div",{className:"flex items-start",children:[a.jsx("span",{className:"text-sky-600 mr-2",children:"\uD83D\uDCE6"}),(0,a.jsxs)("span",{children:[a.jsx("strong",{children:"Real-time Updates:"})," Live synchronization of wishlist changes"]})]}),(0,a.jsxs)("div",{className:"flex items-start",children:[a.jsx("span",{className:"text-sky-600 mr-2",children:"\uD83C\uDFAF"}),(0,a.jsxs)("span",{children:[a.jsx("strong",{children:"Modern UI:"})," Clean, intuitive interface built with Tailwind CSS"]})]})]})]}),a.jsx("div",{className:"text-center mt-6",children:(0,a.jsxs)("div",{className:"bg-white dark:bg-neutral-800 rounded-xl shadow-lg p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-100 mb-2",children:"\uD83D\uDCDA Need Help Getting Started?"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"Visit our complete documentation and installation guide for detailed setup instructions."}),(0,a.jsxs)("a",{href:"https://github.com/shuff57/wiSHlist",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center bg-sky-600 text-white px-6 py-2 rounded-lg hover:bg-sky-800 transition duration-200 font-medium",children:[a.jsx("svg",{className:"w-5 h-5 mr-2",fill:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{d:"M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"})}),"View on GitHub"]})]})}),a.jsx("div",{className:"text-center mt-8",children:a.jsx("div",{className:"flex gap-4 justify-center",children:a.jsx(i.Link,{to:t?"/dashboard":"/",className:"inline-flex items-center bg-gray-600 text-white px-6 py-2 rounded-lg hover:bg-gray-800 transition duration-200 font-medium",children:t?"← Back to Dashboard":"← Back to Login"})})})]})]})},auth_PrivateRoute=()=>{let{user:e,loading:t}=useAuth();return t?a.jsx("div",{children:"Loading..."}):e?a.jsx(i.Outlet,{}):a.jsx(i.Navigate,{to:"/login"})},auth_PublicRoute=()=>{let{user:e,loading:t}=useAuth();return t?a.jsx("div",{children:"Loading..."}):e&&("/"===window.location.pathname||"/register"===window.location.pathname)?a.jsx(i.Navigate,{to:"/dashboard"}):a.jsx(i.Outlet,{})};var H=s(8965),M=s(6666),U=s(7195),q=s(2891),O=s(6929),V=s(5783),z=s(3128);let Modal=({isOpen:e,onClose:t,onConfirm:s,title:r,children:l})=>e?a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-white dark:bg-neutral-800 rounded-lg shadow-xl p-6 w-full max-w-md",children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-gray-200 mb-4",children:r}),a.jsx("div",{className:"text-gray-700 dark:text-gray-300 mb-6",children:l}),(0,a.jsxs)("div",{className:"flex justify-end space-x-4",children:[a.jsx("button",{onClick:t,className:"px-4 py-2 rounded-lg bg-gray-200 bg-neutral-700 text-gray-800 dark:text-gray-200 hover:bg-gray-400",children:"Cancel"}),s&&a.jsx("button",{onClick:s,className:"px-4 py-2 rounded-lg bg-red-600 text-white hover:bg-red-800 hover:bg-red-800",children:"Confirm Delete"})]})]})}):null;var W=s(4458);let useStrictDroppable=e=>{let[t,s]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{let t;return e||(t=requestAnimationFrame(()=>{s(!0)})),()=>{cancelAnimationFrame(t),s(!1)}},[e]),[t]},TeacherDashboard=()=>{let{user:e,loading:t,ensureUserDocument:s}=useAuth(),[l,d]=(0,r.useState)(null),[o,c]=(0,r.useState)([]),[x,p]=(0,r.useState)(null),[y,j]=(0,r.useState)(!0),[f,w]=(0,r.useState)(null),[k,N]=(0,r.useState)(""),[v,S]=(0,r.useState)(!1),[C,D]=(0,r.useState)(null),[$]=useStrictDroppable(y||t),[A,I]=(0,r.useState)(!1),[_,E]=(0,r.useState)(!1),L=(0,r.useRef)(null),R=(0,i.useNavigate)(),retryAfterRateLimit=async(e,t=5e3)=>(E(!0),await new Promise(e=>setTimeout(e,t)),E(!1),await e()),T=(0,r.useCallback)(async(e,t,s)=>{let a=null;try{a=await u.getDocument(m,b,e)}catch(r){if(404===r.code){let r={name:t||"Unknown User",email:s||"unknown@email.com",role:"teacher",isRecommender:!1,isAdmin:!1};try{a=await u.createDocument(m,b,e,r)}catch(t){if(409===t.code)try{for(let t=1;t<=3;t++){await new Promise(e=>setTimeout(e,500*t));try{a=await u.getDocument(m,b,e);break}catch(e){}}}catch(e){}else if(429===t.code)try{a=await retryAfterRateLimit(async()=>await u.createDocument(m,b,e,r))}catch(e){}}}}if(a){d(a);try{let t=await u.listDocuments(m,h,[n.AE.equal("teacher_id",e)]);c(t.documents)}catch(e){}}else{d({$id:"temp",$createdAt:new Date().toISOString(),$updatedAt:new Date().toISOString(),$permissions:[],$collectionId:b,$databaseId:m,isRecommender:!1,isAdmin:!1});try{let t=await u.listDocuments(m,h,[n.AE.equal("teacher_id",e)]);c(t.documents)}catch(e){c([])}}},[]);(0,r.useEffect)(()=>{if(t||!e||A)t||e||R("/login");else{if(L.current===e.$id)return;I(!0),L.current=e.$id;let initializeUser=async()=>{try{await s(),await T(e.$id,e.name,e.email)}catch(e){}finally{j(!1),I(!1)}};initializeUser()}},[e,t,R,T,s,A]);let createWishlist=async()=>{if(e)try{let t=n.ID.unique(),s=await u.createDocument(m,h,n.ID.unique(),{teacher_name:e.name,teacher_id:e.$id,wishlist_key:t,wishlist_name:`${e.name}'s New wiSHlist`});c(e=>[...e,s])}catch(e){}},handleCopy=e=>{navigator.clipboard.writeText(`${window.location.origin}/wishlist/${e}`),p(e),setTimeout(()=>p(null),2e3)},handleEditClick=e=>{w(e.$id),N(e.wishlist_name||"")},handleCancelEdit=()=>{w(null),N("")},handleUpdateWishlistName=async e=>{try{let t=await u.updateDocument(m,h,e,{wishlist_name:k});c(s=>s.map(s=>s.$id===e?t:s)),handleCancelEdit()}catch(e){}},handleDeleteWishlist=e=>{D(e),S(!0)},confirmDelete=async()=>{if(C)try{let e=await u.listDocuments(m,g,[n.AE.equal("wishlist_id",C)]);for(let t of e.documents)await u.deleteDocument(m,g,t.$id);await u.deleteDocument(m,h,C),c(e=>e.filter(e=>e.$id!==C))}catch(e){}finally{S(!1),D(null)}};return t||y||!e?(0,a.jsxs)("div",{className:"min-h-screen bg-neutral-100 dark:bg-neutral-900",children:[a.jsx(Header,{title:"Dashboard",showInfoButton:!0,isLoading:!0}),a.jsx("main",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:_?a.jsx("div",{className:"text-center py-16",children:(0,a.jsxs)("div",{className:"bg-white dark:bg-neutral-800 rounded-lg shadow p-8 max-w-md mx-auto",children:[a.jsx("p",{className:"text-lg mb-2",children:"⏳ Rate limited by server"}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Waiting before retry... Please be patient."})]})}):(0,a.jsxs)("div",{className:"space-y-6",children:[a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:[1,2,3].map(e=>(0,a.jsxs)("div",{className:"bg-white dark:bg-neutral-800 rounded-lg shadow p-4 animate-pulse",children:[a.jsx("div",{className:"h-4 bg-gray-200 dark:bg-neutral-700 rounded w-3/4 mb-3"}),a.jsx("div",{className:"h-3 bg-gray-200 dark:bg-neutral-700 rounded w-1/2 mb-2"}),a.jsx("div",{className:"h-3 bg-gray-200 dark:bg-neutral-700 rounded w-2/3"})]},e))}),a.jsx("div",{className:"text-center text-gray-600 dark:text-gray-400",children:"Loading your wishlists..."})]})})]}):(0,a.jsxs)("div",{className:"min-h-screen bg-neutral-100 dark:bg-neutral-900 text-gray-800 dark:text-gray-200",children:[a.jsx(Header,{title:"Teacher Dashboard",showSettingsButton:!0,showInfoButton:!0,isLoading:!1}),(0,a.jsxs)("main",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[a.jsx("h2",{className:"text-3xl font-bold text-gray-800 dark:text-gray-200",children:"Your wiSHlists"}),(0,a.jsxs)("button",{onClick:createWishlist,className:"bg-green-600 text-white py-2 px-8 xs:px-4 rounded-lg hover:bg-green-800 flex items-center",children:[a.jsx(H.Z,{className:"w-5 h-5 xs:mr-2"}),a.jsx("span",{className:"hidden xs:inline",children:"Create New wiSHlist"})]})]}),a.jsx(W.Z5,{onDragEnd:e=>{let{destination:t,source:s}=e;if(!t||t.droppableId===s.droppableId&&t.index===s.index)return;let a=Array.from(o),[r]=a.splice(s.index,1);a.splice(t.index,0,r),c(a)},children:$&&a.jsx(W.bK,{droppableId:"wishlists",children:t=>(0,a.jsxs)("div",{...t.droppableProps,ref:t.innerRef,className:"space-y-4",children:[o.map((t,s)=>a.jsx(W._l,{draggableId:t.$id,index:s,children:s=>a.jsx("div",{ref:s.innerRef,...s.draggableProps,className:"bg-white dark:bg-neutral-800 rounded-lg shadow p-4 cursor-pointer transition-colors duration-200 hover:bg-neutral-200 dark:hover:bg-neutral-700 group",children:(0,a.jsxs)("div",{className:"flex items-center",children:[a.jsx("div",{...s.dragHandleProps,className:"p-2 cursor-grab",children:a.jsx(M.Z,{className:"w-5 h-5 text-gray-400"})}),(0,a.jsxs)("div",{className:"flex-grow flex justify-between items-center ml-2",children:[f===t.$id?(0,a.jsxs)("div",{className:"flex-grow flex items-center space-x-2 mr-2",children:[a.jsx("input",{type:"text",value:k,onChange:e=>N(e.target.value),className:"flex-grow p-1 border rounded bg-white dark:bg-neutral-700 w-full"}),a.jsx("button",{onClick:()=>handleUpdateWishlistName(t.$id),className:"p-2 text-green-600 hover:bg-green-800 rounded-full",children:a.jsx(U.Z,{})}),a.jsx("button",{onClick:handleCancelEdit,className:"p-2 text-red-600 hover:bg-red-800 rounded-full",children:a.jsx(F.Z,{})})]}):(0,a.jsxs)("div",{className:"flex-grow flex items-center space-x-2 cursor-pointer",onClick:()=>{R(`/wishlist/${t.$id}/edit`)},children:[a.jsx("h3",{className:"font-semibold text-lg text-gray-900 dark:text-gray-200",children:t.wishlist_name}),a.jsx("button",{onClick:e=>{e.stopPropagation(),handleEditClick(t)},className:"p-1 text-gray-500 hover:text-sky-800 opacity-0 group-hover:opacity-100 transition-opacity",children:a.jsx(q.Z,{className:"w-4 h-4"})})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)("button",{onClick:e=>{e.stopPropagation(),handleCopy(t.wishlist_key)},className:`px-3 py-1 text-sm rounded transition-colors flex items-center ${x===t.wishlist_key?"bg-green-600 text-white":"bg-transparent text-sky-600 hover:bg-neutral-100 dark:hover:bg-neutral-700 xs:bg-sky-600 xs:text-white xs:hover:bg-sky-800"}`,children:[x===t.wishlist_key?a.jsx(U.Z,{className:"w-4 h-4 xs:mr-1"}):a.jsx(O.Z,{className:"w-4 h-4 xs:mr-1"}),a.jsx("span",{className:"hidden xs:inline",children:x===t.wishlist_key?"Copied!":"Share List"})]}),a.jsx(Tooltip,{text:"Duplicate wiSHlist",position:"top",children:a.jsx("button",{onClick:async s=>{s.stopPropagation();try{let s=t.wishlist_name||t.wishlist_key,a=`${s}(copy)`,r=`${t.wishlist_key.replace(/[^a-zA-Z0-9]/g,"")}-copy-${Math.random().toString(36).substring(2,8)}`,l=Object.fromEntries(Object.entries(t).filter(([e])=>!e.startsWith("$")&&"wishlist_key"!==e&&"wishlist_name"!==e));await u.createDocument(m,h,n.ID.unique(),{...l,wishlist_key:r,wishlist_name:a,teacher_id:e?.$id,teacher_name:e?.name});let i=await u.listDocuments(m,g,[n.AE.equal("wishlist_id",t.$id)]);for(let e of i.documents){let t=Object.fromEntries(Object.entries(e).filter(([e])=>!e.startsWith("$")&&"wishlist_id"!==e&&"wishlist_key"!==e));await u.createDocument(m,g,n.ID.unique(),{...t,wishlist_id:r})}let d=await u.listDocuments(m,h,[n.AE.equal("teacher_id",e?.$id)]);c(d.documents)}catch(e){alert("Failed to duplicate wishlist.")}},className:"p-2 text-sky-600 hover:bg-neutral-800 dark:hover:bg-neutral-800 rounded-full",children:a.jsx(V.Z,{className:"w-5 h-5"})})}),a.jsx("button",{onClick:e=>{e.stopPropagation(),handleDeleteWishlist(t.$id)},className:"p-2 text-red-600 hover:bg-white dark:hover:bg-neutral-800 rounded-full",children:a.jsx(z.Z,{className:"w-5 h-5"})})]})]})]})})},t.$id)),t.placeholder]})})}),0===o.length&&a.jsx("div",{className:"flex flex-col items-center justify-center py-16 px-4 text-center",children:(0,a.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg p-8 max-w-md",children:[a.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"Welcome to wiSHlist! \uD83C\uDF89"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Create your first wishlist to get started. Your students and supporters will be able to see and fulfill your classroom needs."})]})})]}),a.jsx(Modal,{isOpen:v,onClose:()=>S(!1),onConfirm:confirmDelete,title:"Delete Wishlist",children:a.jsx("p",{children:"Are you sure you want to delete this wishlist and all of its items? This action cannot be undone."})})]})};var G=s(8306),K=s(4483);let EditableAboutView=()=>{let[e]=(0,r.useState)(!0),[t,s]=(0,r.useState)(null),[l,n]=(0,r.useState)(""),[d,o]=(0,r.useState)(""),[c,x]=(0,r.useState)(""),[u,m]=(0,r.useState)({left:[{id:"1",type:"heading",width:"full",title:"\uD83D\uDCD6 About wiSHlist",content:"wiSHlist is a modern, user-friendly wishlist application designed specifically for teachers to create and share classroom supply wishlists with supporters. Built with React, TypeScript, and Appwrite, it empowers educators to create organized wishlists of classroom supplies and materials, making it easy for parents, community members, and supporters to contribute to student success."},{id:"2",type:"list",width:"half",content:"",title:"✨ For Teachers",listItems:["Wishlist Management: Create and manage multiple wishlists with drag-and-drop reordering","Customizable Items: Add items with names, descriptions, store links, and estimated costs","User Management: Invite and manage recommenders and administrators","Contribution Tracking: Monitor which items have been purchased and by how many contributors","Easy Sharing: Generate shareable links and keys for public wishlist access"]}],right:[{id:"3",type:"list",width:"half",content:"",title:"\uD83D\uDECD️ For Supporters",listItems:["Easy Browsing: View wishlists in list or grid layout","Item Details: See item descriptions, costs, and store links","Purchase Tracking: Mark items as purchased to prevent duplicates","Direct Links: Quick access to store pages for purchasing","Suggestions: Recommend new items to teachers"]}]}),addNewBlock=(e,t)=>{let a={id:Date.now().toString(),type:t,width:e,content:"text"===t?"Enter your text here...":"",title:"text"!==t?"New Section":void 0,listItems:"list"===t?["New item"]:void 0,emoji:"text"!==t?"✨":void 0};if("full"===e)m(e=>({...e,left:[...e.left,a]}));else{let leftCount=e=>e.left.filter(e=>"half"===e.width).length,rightCount=e=>e.right.length;m(e=>leftCount(e)<=rightCount(e)?{...e,left:[...e.left,a]}:{...e,right:[...e.right,a]})}s(a.id),n(a.content),o(a.title||""),x(a.emoji||"")},startEditing=e=>{s(e.id),n(e.content),o(e.title||""),x(e.emoji||"")},saveBlock=()=>{t&&(m(e=>{let updateBlock=e=>e.map(e=>e.id===t?{...e,content:l,title:d||e.title,emoji:c||e.emoji,listItems:"list"===e.type?l.split("\n").filter(e=>e.trim()):e.listItems}:e);return{left:updateBlock(e.left),right:updateBlock(e.right)}}),s(null),n(""),o(""),x(""))},deleteBlock=e=>{m(t=>({left:t.left.filter(t=>t.id!==e),right:t.right.filter(t=>t.id!==e)}))},renderBlock=r=>{let i=t===r.id;return(0,a.jsxs)("div",{className:`bg-white dark:bg-neutral-800 rounded-xl shadow-lg p-6 relative group ${"full"===r.width?"col-span-2":""}`,children:[e&&(0,a.jsxs)("div",{className:"absolute top-2 right-2 flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[a.jsx("button",{onClick:()=>startEditing(r),className:"p-1 text-gray-400 hover:text-blue-600 transition-colors",children:a.jsx(G.Z,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>deleteBlock(r.id),className:"p-1 text-gray-400 hover:text-red-600 transition-colors",children:a.jsx(z.Z,{className:"w-4 h-4"})})]}),i?(0,a.jsxs)("div",{className:"space-y-3",children:["text"!==r.type&&(0,a.jsxs)(a.Fragment,{children:[a.jsx("input",{type:"text",value:c,onChange:e=>x(e.target.value),className:"w-16 px-2 py-1 border rounded text-sm",placeholder:"Emoji"}),a.jsx("input",{type:"text",value:d,onChange:e=>o(e.target.value),className:"w-full px-3 py-2 border rounded font-semibold",placeholder:"Section Title"})]}),a.jsx("textarea",{value:l,onChange:e=>n(e.target.value),className:"w-full px-3 py-2 border rounded resize-none",rows:"list"===r.type?8:4,placeholder:"list"===r.type?"Enter list items (one per line)":"Enter content..."}),(0,a.jsxs)("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:saveBlock,className:"px-3 py-1 bg-green-600 text-white rounded text-sm hover:bg-green-700",children:a.jsx(K.Z,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>s(null),className:"px-3 py-1 bg-gray-600 text-white rounded text-sm hover:bg-gray-700",children:a.jsx(F.Z,{className:"w-4 h-4"})})]})]}):(0,a.jsxs)(a.Fragment,{children:["heading"===r.type&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("h2",{className:"text-2xl font-bold text-gray-800 dark:text-gray-100 mb-4",children:[r.emoji," ",r.title]}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:r.content})]}),"text"===r.type&&a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:r.content}),"list"===r.type&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("h3",{className:"text-xl font-semibold text-gray-800 dark:text-gray-100 mb-4",children:[r.emoji," ",r.title]}),a.jsx("ul",{className:"space-y-2 text-gray-600 dark:text-gray-400",children:r.listItems?.map((e,t)=>a.jsxs("li",{className:"flex items-start",children:[a.jsx("span",{className:"text-sky-600 mr-2",children:"•"}),a.jsx("span",{children:e})]},t))})]})]})]},r.id)},renderColumn=(e,t)=>{let s=t?e.filter(e=>"full"===e.width):[],r=e.filter(e=>"half"===e.width);return(0,a.jsxs)(a.Fragment,{children:[t&&s.map(renderBlock),r.map(renderBlock)]})};return(0,a.jsxs)("div",{className:"min-h-screen bg-neutral-100 dark:bg-neutral-900",children:[a.jsx(Header,{title:"About",showSettingsButton:!1,showSignoutButton:!1,showLoginButton:!0}),(0,a.jsxs)("div",{className:"max-w-4xl mx-auto px-4 pt-8",children:[a.jsx("div",{className:"flex justify-between items-center mb-6",children:a.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-gray-100",children:"About Page Editor"})}),e&&(0,a.jsxs)("div",{className:"mb-6 p-4 bg-white dark:bg-neutral-800 rounded-xl shadow-lg",children:[a.jsx("h3",{className:"text-lg font-semibold mb-3 text-gray-800 dark:text-gray-100",children:"Add New Content"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("h4",{className:"font-medium mb-2 text-gray-700 dark:text-gray-300",children:"Full Width"}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx("button",{onClick:()=>addNewBlock("full","heading"),className:"w-full px-3 py-2 bg-sky-600 text-white rounded hover:bg-sky-700 text-sm",children:"+ Heading Section"}),a.jsx("button",{onClick:()=>addNewBlock("full","text"),className:"w-full px-3 py-2 bg-gray-600 text-white rounded hover:bg-gray-700 text-sm",children:"+ Text Block"})]})]}),(0,a.jsxs)("div",{children:[a.jsx("h4",{className:"font-medium mb-2 text-gray-700 dark:text-gray-300",children:"Half Width"}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx("button",{onClick:()=>addNewBlock("half","list"),className:"w-full px-3 py-2 bg-green-600 text-white rounded hover:bg-green-700 text-sm",children:"+ List Section"}),a.jsx("button",{onClick:()=>addNewBlock("half","text"),className:"w-full px-3 py-2 bg-purple-600 text-white rounded hover:bg-purple-700 text-sm",children:"+ Text Block"})]})]})]})]}),(0,a.jsxs)("div",{className:"space-y-6 xl:space-y-0 xl:grid xl:grid-cols-2 xl:gap-6 pb-12",children:[renderColumn(u.left,!0),renderColumn(u.right,!1)]}),(0,a.jsxs)("div",{className:"bg-white dark:bg-neutral-800 rounded-xl shadow-lg p-6 mt-6",children:[a.jsx("h3",{className:"text-xl font-semibold text-gray-800 dark:text-gray-100 mb-4",children:"\uD83D\uDD27 Technical Features"}),(0,a.jsxs)("div",{className:"grid sm:grid-cols-2 gap-4 text-gray-600 dark:text-gray-400",children:[(0,a.jsxs)("div",{className:"flex items-start",children:[a.jsx("span",{className:"text-sky-600 mr-2",children:"\uD83C\uDF19"}),(0,a.jsxs)("span",{children:[a.jsx("strong",{children:"Dark/Light Mode:"})," Automatic theme switching"]})]}),(0,a.jsxs)("div",{className:"flex items-start",children:[a.jsx("span",{className:"text-sky-600 mr-2",children:"\uD83D\uDD10"}),(0,a.jsxs)("span",{children:[a.jsx("strong",{children:"Secure Authentication:"})," User registration and login with Appwrite"]})]}),(0,a.jsxs)("div",{className:"flex items-start",children:[a.jsx("span",{className:"text-sky-600 mr-2",children:"\uD83D\uDCE6"}),(0,a.jsxs)("span",{children:[a.jsx("strong",{children:"Real-time Updates:"})," Live synchronization of wishlist changes"]})]}),(0,a.jsxs)("div",{className:"flex items-start",children:[a.jsx("span",{className:"text-sky-600 mr-2",children:"\uD83C\uDFAF"}),(0,a.jsxs)("span",{children:[a.jsx("strong",{children:"Modern UI:"})," Clean, intuitive interface built with Tailwind CSS"]})]})]})]}),a.jsx("div",{className:"text-center mt-6",children:(0,a.jsxs)("div",{className:"bg-white dark:bg-neutral-800 rounded-xl shadow-lg p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-100 mb-2",children:"\uD83D\uDCDA Need Help Getting Started?"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"Visit our complete documentation and installation guide for detailed setup instructions."}),(0,a.jsxs)("a",{href:"https://github.com/shuff57/wiSHlist",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center bg-sky-600 text-white px-6 py-2 rounded-lg hover:bg-sky-800 transition duration-200 font-medium",children:[a.jsx("svg",{className:"w-5 h-5 mr-2",fill:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{d:"M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"})}),"View on GitHub"]})]})}),a.jsx("div",{className:"text-center mt-8",children:a.jsx(i.Link,{to:"/",className:"inline-flex items-center bg-gray-600 text-white px-6 py-2 rounded-lg hover:bg-gray-800 transition duration-200 font-medium",children:"← Back to Login"})})]})]})};var Y=s(6932),Q=s(3238),J=s(7034),X=s(3405),ee=s(7930),et=s(8533);let WishlistPreview=({wishlistKey:e,editable:t,userName:s})=>{let[l,i]=(0,r.useState)(null),[d,o]=(0,r.useState)([]),[c,x]=(0,r.useState)(!0),[b,p]=(0,r.useState)(""),[y,j]=(0,r.useState)("list"),[f,w]=(0,r.useState)(null),[k,N]=(0,r.useState)(""),[v,S]=(0,r.useState)(""),[C,D]=(0,r.useState)(!1),$=(0,r.useCallback)(async e=>{let t=e.trim();p("");try{let e=await u.listDocuments(m,h,[n.AE.equal("wishlist_key",t)]);if(e.documents.length>0){let t=e.documents[0];i(t);let s=await u.listDocuments(m,g,[n.AE.equal("wishlist_id",t.$id)]);o(s.documents)}else p("No wishlist found with that key. Please check the key and try again.")}catch(e){p(`Failed to fetch wishlist: ${e.message||"Unknown error"}. Please try again.`)}finally{x(!1)}},[]);if((0,r.useEffect)(()=>{e&&$(e)},[e,$]),c)return a.jsx("div",{children:"Loading..."});if(b)return(0,a.jsxs)("div",{className:"min-h-screen bg-neutral-100 dark:bg-neutral-900 flex flex-col items-center justify-center text-center p-4",children:[a.jsx("h1",{className:"text-2xl font-bold text-red-600",children:"Error"}),a.jsx("p",{className:"text-gray-700 dark:text-gray-300 mt-4",children:b})]});let A=l?.title_text||(s?`Help ${s}'s Students Learn & Grow`:l?`Help ${l.teacher_name}'s Students Learn & Grow`:"Help Students Learn & Grow"),I=l?.welcome_message||"Your contributions make a real difference in our classroom. Thank you for supporting education!",handleSave=async()=>{if(l){D(!0);try{let e=await u.updateDocument(m,h,l.$id,{title_text:"heading"===f?k:l.title_text,welcome_message:"welcome"===f?v:l.welcome_message});i(e),w(null)}catch(e){alert("Failed to save. Please try again.")}finally{D(!1)}}};return a.jsx("div",{className:"min-h-screen bg-neutral-100 dark:bg-neutral-900",children:(0,a.jsxs)("main",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,a.jsxs)("div",{className:"text-center mb-8",children:["heading"===f?(0,a.jsxs)("div",{className:"flex flex-col items-center mb-2",children:[a.jsx("input",{className:"text-2xl font-bold text-gray-800 dark:text-gray-100 mb-2 px-2 py-1 rounded border border-gray-300 dark:border-gray-600 bg-white dark:bg-neutral-800 w-full max-w-xl",value:k,onChange:e=>N(e.target.value),disabled:C}),(0,a.jsxs)("div",{className:"flex gap-2 mt-2",children:[a.jsx("button",{onClick:handleSave,disabled:C||!k.trim(),className:"px-3 py-1 bg-sky-600 text-white rounded hover:bg-sky-800 disabled:bg-gray-400",children:"Save"}),a.jsx("button",{onClick:()=>w(null),disabled:C,className:"px-3 py-1 bg-gray-300 text-gray-800 rounded hover:bg-gray-400",children:"Cancel"})]})]}):(0,a.jsxs)("div",{className:"flex items-center justify-center mb-2",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-gray-100",children:A}),l&&void 0!==t&&t&&a.jsx("button",{className:"ml-2 p-1 text-gray-500 hover:text-sky-600",onClick:()=>{w("heading"),N(A)},title:"Edit heading",children:a.jsx(Y.Z,{className:"h-4 w-4"})})]}),"welcome"===f?(0,a.jsxs)("div",{className:"flex flex-col items-center mb-2",children:[a.jsx("textarea",{className:"text-gray-600 dark:text-gray-400 mb-2 px-2 py-1 rounded border border-gray-300 dark:border-gray-600 bg-white dark:bg-neutral-800 w-full max-w-xl",value:v,onChange:e=>S(e.target.value),rows:3,disabled:C}),(0,a.jsxs)("div",{className:"flex gap-2 mt-2",children:[a.jsx("button",{onClick:handleSave,disabled:C||!v.trim(),className:"px-3 py-1 bg-sky-600 text-white rounded hover:bg-sky-800 disabled:bg-gray-400",children:"Save"}),a.jsx("button",{onClick:()=>w(null),disabled:C,className:"px-3 py-1 bg-gray-300 text-gray-800 rounded hover:bg-gray-400",children:"Cancel"})]})]}):(0,a.jsxs)("div",{className:"flex items-center justify-center",children:[a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:I}),l&&void 0!==t&&t&&a.jsx("button",{className:"ml-2 p-1 text-gray-500 hover:text-sky-600",onClick:()=>{w("welcome"),S(I)},title:"Edit welcome message",children:a.jsx(Y.Z,{className:"h-4 w-4"})})]}),l?.contact_info&&(0,a.jsxs)("p",{className:"mt-2 text-sm text-gray-500 dark:text-gray-400",children:[a.jsx("strong",{children:"Contact:"})," ",l.contact_info]})]}),(0,a.jsxs)("div",{className:"space-y-8 bg-white dark:bg-neutral-900 rounded-lg shadow p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsxs)("h3",{className:"text-xl font-bold text-gray-800 dark:text-gray-200",children:["Classroom Needs (",d.length," items)"]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx(Tooltip,{text:"List View",children:a.jsx("button",{onClick:()=>j("list"),className:`p-2 rounded-md transition-colors ${"list"===y?"bg-sky-600 text-white hover:bg-sky-800":"bg-gray-200 dark:bg-neutral-700 text-gray-600 dark:text-gray-300 hover:bg-gray-400 dark:hover:bg-neutral-500"}`,children:a.jsx(Q.Z,{className:"w-5 h-5"})})}),a.jsx(Tooltip,{text:"Grid View",children:a.jsx("button",{onClick:()=>j("grid"),className:`p-2 rounded-md transition-colors ${"grid"===y?"bg-sky-600 text-white hover:bg-sky-800":"bg-gray-200 dark:bg-neutral-700 text-gray-600 dark:text-gray-300 hover:bg-gray-400 dark:hover:bg-neutral-500"}`,children:a.jsx(J.Z,{className:"w-5 h-5"})})})]})]}),a.jsx("div",{className:`grid gap-6 ${"grid"===y?"grid-cols-1 md:grid-cols-2":"grid-cols-1"}`,children:d.length>0?d.map(e=>(0,a.jsxs)("div",{className:"bg-white dark:bg-neutral-800 rounded-lg shadow hover:shadow-md transition-shadow p-6 flex flex-col justify-between w-full",children:[a.jsx("div",{children:a.jsx("div",{className:"mb-3",children:(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"text-xl font-semibold text-gray-800 dark:text-gray-100 mb-2",children:e.name}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:e.description})]})})}),(0,a.jsxs)("div",{className:"mt-4 w-full",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[e.cost&&a.jsx("span",{className:"text-green-600 dark:text-green-400 font-medium text-lg",children:e.cost}),(0,a.jsxs)("span",{className:"text-blue-600 dark:text-blue-400 flex items-center text-sm",children:[a.jsx(X.Z,{className:"w-4 h-4 mr-1"}),e.contributions," contributions"]})]}),(0,a.jsxs)("div",{className:"flex gap-2 w-full justify-between",children:[a.jsx("div",{className:"flex-none",children:a.jsx(Tooltip,{text:"Opens in a new tab",children:(0,a.jsxs)("a",{href:e.store_link||"#",target:e.store_link?"_blank":void 0,rel:e.store_link?"noopener noreferrer":void 0,className:`${e.store_link?"bg-green-600 hover:bg-green-800":"bg-gray-400 cursor-not-allowed"} text-white px-12 xs:px-6 py-2 rounded-lg transition duration-200 flex items-center justify-center text-sm font-medium`,children:[a.jsx("span",{className:"hidden xs:inline",children:"Purchase"})," ",a.jsx(ee.Z,{className:"w-4 h-4 xs:ml-2"})]})})}),a.jsx("div",{className:"flex-none",children:a.jsx(Tooltip,{text:"Let the teacher know you've purchased this item",children:(0,a.jsxs)("button",{className:"bg-sky-600 text-white px-12 xs:px-6 py-2 rounded-lg hover:bg-sky-800 transition duration-200 flex items-center justify-center text-sm font-medium",children:[a.jsx(et.Z,{className:"w-4 h-4 xs:mr-2"}),a.jsx("span",{className:"hidden xs:inline",children:"I bought this"})]})})})]})]})]},e.$id)):a.jsx("div",{className:"text-center py-10 bg-white dark:bg-neutral-800 rounded-lg shadow",children:a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"This wiSHlist is empty!"})})})]})]})})},es=[{value:"bug",label:"Issue/Bug"},{value:"feature",label:"Feature/Enhancement"},{value:"question",label:"Question"},{value:"other",label:"Other"}],teacher_Settings=()=>{let[e,t]=(0,r.useState)([{id:"display-name"},{id:"share-link"},{id:"manage-permissions"},{id:"feedback-manager"},{id:"edit-about"}]),[s,l]=(0,r.useState)(!0),d=useStrictDroppable(s),[o,c]=(0,r.useState)(!1);(0,r.useEffect)(()=>{c(d[0])},[d]);let[g,y]=(0,r.useState)(null),[f,w]=(0,r.useState)(null),[N,v]=(0,r.useState)(""),[S,C]=(0,r.useState)("24"),[D,$]=(0,r.useState)(!1),[A,I]=(0,r.useState)(!1),[_,E]=(0,r.useState)(""),[L,R]=(0,r.useState)(!1),[T,B]=(0,r.useState)(!1),[F,P]=(0,r.useState)(""),[Z,H]=(0,r.useState)([]),[q,O]=(0,r.useState)(!1),[V,G]=(0,r.useState)(!1),[K,Y]=(0,r.useState)([]),[Q,J]=(0,r.useState)(!1),[X,ee]=(0,r.useState)(!1),[et,ea]=(0,r.useState)(null),[er,el]=(0,r.useState)(!1),[ei,en]=(0,r.useState)(!1),[ed,eo]=(0,r.useState)("all"),[ec,ex]=(0,r.useState)("all"),[eu,em]=(0,r.useState)(!1),[eh,eg]=(0,r.useState)([]),[eb,ep]=(0,r.useState)(null),ey=(0,i.useNavigate)(),ej=g?.name.toLowerCase().includes("huff")||g?.email.toLowerCase().includes("huff");(0,r.useEffect)(()=>{let fetchData=async()=>{try{let e=await x.get();y(e),v(e.name);try{let t=await u.getDocument(m,b,e.$id),s=e.name.toLowerCase().includes("huff")||e.email.toLowerCase().includes("huff");if(!s||t.isAdmin&&t.isRecommender)w(t);else try{let t=await u.updateDocument(m,b,e.$id,{isAdmin:!0,isRecommender:!0});w(t)}catch(e){w(t)}t.isAdmin||t.isRecommender}catch(s){let t=e.name.toLowerCase().includes("huff")||e.email.toLowerCase().includes("huff");try{let s=await u.createDocument(m,b,e.$id,{name:e.name,email:e.email,role:"teacher",isRecommender:t,isAdmin:t,name_lowercase:e.name.toLowerCase()});w(s)}catch(s){setTimeout(async()=>{try{let t=await u.getDocument(m,b,e.$id);w(t)}catch(s){w({$id:e.$id,name:e.name,email:e.email,role:"teacher",isRecommender:t,isAdmin:t})}},1e3)}}}catch(e){ey("/login")}finally{l(!1)}};fetchData()},[ey]),(0,r.useEffect)(()=>{let searchUsers=async()=>{if(!g){H([]);return}G(!0);try{let e=[];ej||e.push(n.AE.equal("userID",g.$id)),""!==F.trim()&&e.push(n.AE.startsWith("name_lowercase",F.toLowerCase()));let t=await u.listDocuments(m,b,e);H(t.documents)}catch(e){}finally{G(!1)}},e=setTimeout(()=>{searchUsers()},500);return()=>clearTimeout(e)},[F,g,ej]),(0,r.useEffect)(()=>{let fetchWishlists=async()=>{if(g)try{let e=await u.listDocuments(m,h,[n.AE.equal("teacher_id",g.$id)]);eg(e.documents)}catch(e){}};fetchWishlists()},[g]);let ef=(0,r.useCallback)(async()=>{if(ej){J(!0);try{let e=await u.listDocuments(m,j);Y(e.documents)}catch(e){}finally{J(!1)}}},[ej]),handleDeleteFeedback=async e=>{try{await u.deleteDocument(m,j,e),Y(t=>t.filter(t=>t.$id!==e)),ee(!1),ea(null)}catch(e){}},handleUpdateFeedbackStatus=async(e,t)=>{try{await u.updateDocument(m,j,e,{status:t}),Y(s=>s.map(s=>s.$id===e?{...s,status:t}:s))}catch(e){}},handleUpdateFeedbackCategory=async(e,t)=>{try{await u.updateDocument(m,j,e,{category:t}),Y(s=>s.map(s=>s.$id===e?{...s,category:t}:s))}catch(e){}},ew=K.filter(e=>{let t="all"===ed||e.status===ed,s="all"===ec||e.category===ec;return t&&s});(0,r.useEffect)(()=>{ej&&!s&&ef()},[ej,s,ef]);let toggleUserStatus=async(e,t)=>{try{let s,a=e.isAdmin,r=e.isRecommender;"isAdmin"===t?(a=!e.isAdmin)&&!r&&(r=!0):"isRecommender"!==t||(r=!e.isRecommender)||!a||(a=!1);try{s=await u.updateDocument(m,b,e.$id,{isAdmin:a,isRecommender:r})}catch(t){try{s=await u.createDocument(m,b,e.$id,{name:e.name,email:e.email,role:"teacher",isRecommender:r,isAdmin:a,name_lowercase:e.name.toLowerCase(),userID:g?.$id})}catch(e){throw e}}e.$id===g?.$id&&w(s),H(t=>t.map(t=>t.$id===e.$id?s:t))}catch(e){}},ek=Z.filter(e=>e.$id!==g?.$id);return(0,a.jsxs)("div",{className:"min-h-screen bg-neutral-100 dark:bg-neutral-900 text-gray-800 dark:text-gray-200",children:[a.jsx(Header,{title:"Profile Settings",showBackButton:!0,showSettingsButton:!1,showInfoButton:!0,isLoading:s||V}),(0,a.jsxs)("main",{className:"max-w-2xl mx-auto px-4 sm:px-6 lg:px-8 py-8 space-y-8",children:[a.jsx(W.Z5,{onDragEnd:s=>{if(!s.destination||s.destination.index===s.source.index)return;let a=Array.from(e),[r]=a.splice(s.source.index,1);a.splice(s.destination.index,0,r),t(a)},children:o&&a.jsx(W.bK,{droppableId:"settings-sections-droppable",children:t=>(0,a.jsxs)("div",{...t.droppableProps,ref:t.innerRef,className:"space-y-8",children:[e.map((e,t)=>{let s=null;return("display-name"===e.id?s=(0,a.jsxs)("div",{className:"bg-white dark:bg-neutral-800 rounded-lg shadow p-8",children:[a.jsx("div",{className:"flex items-center mb-4",children:a.jsx("h2",{className:"text-lg font-semibold",children:"Supporter View"})}),(0,a.jsxs)("div",{className:"space-y-6",children:[!eu&&a.jsx("button",{type:"button",onClick:()=>em(!0),className:"w-full px-4 py-2 rounded-lg font-semibold text-base bg-sky-600 text-white hover:bg-sky-800 disabled:bg-gray-400 transition-colors duration-200",children:"Open wiSHlist Preview"}),eu&&(0,a.jsxs)("div",{className:"mt-4 border-t pt-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("span",{className:"font-semibold text-md",children:"wiSHlist Preview"}),a.jsx("button",{onClick:()=>em(!1),className:"px-4 py-2 rounded-lg font-semibold text-base bg-gray-600 text-white hover:bg-gray-700",children:"Close Preview"})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("select",{onChange:e=>{let t=e.target.value;t&&ep(t)},className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-neutral-800",children:[a.jsx("option",{value:"",children:"Select a wishlist"}),eh.map(e=>a.jsx("option",{value:e.wishlist_key,children:e.wishlist_name||e.wishlist_key},e.$id))]}),eb&&a.jsx("div",{className:"border border-gray-300 dark:border-gray-600 rounded-lg p-4 bg-gray-50 dark:bg-gray-800",children:a.jsx(WishlistPreview,{wishlistKey:eb,editable:!0,userName:N})})]})]})]})]}):"share-link"===e.id&&(f?.isRecommender||f?.isAdmin)?s=(0,a.jsxs)("div",{className:"bg-white dark:bg-neutral-800 rounded-lg shadow p-6",children:[a.jsx("div",{className:"flex items-center mb-4",children:a.jsx("h2",{className:"text-lg font-semibold",children:"Generate Teacher Invitation Link"})}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2",children:"Link expires in:"}),(0,a.jsxs)("select",{value:S,onChange:e=>C(e.target.value),className:"w-full px-3 py-2 border border-neutral-300 dark:border-neutral-600 rounded-lg bg-white dark:bg-neutral-700",children:[a.jsx("option",{value:"24",children:"24 hours"}),a.jsx("option",{value:"48",children:"48 hours"}),a.jsx("option",{value:"168",children:"1 week"})]})]}),f?.isAdmin&&(0,a.jsxs)("div",{className:"flex justify-around items-center pt-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx("label",{className:"text-sm font-medium",children:"Recommender:"}),a.jsx("button",{onClick:()=>{let e=!D;$(e),!e&&A&&I(!1)},className:`relative inline-flex items-center h-6 rounded-full w-11 ${D?"bg-sky-600 hover:bg-sky-800":"bg-gray-300 hover:bg-gray-500"}`,children:a.jsx("span",{className:`inline-block w-4 h-4 transform bg-white rounded-full transition-transform ${D?"translate-x-6":"translate-x-1"}`})})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx("label",{className:"text-sm font-medium",children:"Admin:"}),a.jsx("button",{onClick:()=>{let e=!A;I(e),e&&!D&&$(!0)},className:`relative inline-flex items-center h-6 rounded-full w-11 ${A?"bg-sky-600 hover:bg-sky-800":"bg-gray-300 hover:bg-gray-500"}`,children:a.jsx("span",{className:`inline-block w-4 h-4 transform bg-white rounded-full transition-transform ${A?"translate-x-6":"translate-x-1"}`})})]})]}),f?.isRecommender&&!f?.isAdmin&&a.jsx("div",{className:"pt-4 text-sm text-gray-600 dark:text-gray-400 bg-blue-50 dark:bg-blue-900/20 p-3 rounded-lg",children:a.jsx("p",{children:"ℹ️ As a Recommender, you can invite new teachers with basic access. Only Admins can grant special privileges."})}),a.jsx("button",{onClick:async()=>{B(!0);try{let e=n.ID.unique(),t=new Date(Date.now()+36e5*parseInt(S,10)),s={token:e,expiresAt:t.toISOString(),isRecommender:D,isAdmin:A,userID:g?.$id};await u.createDocument(m,p,e,s);let a=`${window.location.origin}/register?token=${e}`;E(a)}catch(e){e instanceof Error?alert(`Error generating link: ${e.message}`):alert("Unknown error occurred while generating link. Check console for details.")}finally{B(!1)}},disabled:T,className:"w-full px-4 py-2 rounded-lg font-semibold text-base bg-sky-600 text-white hover:bg-sky-800 disabled:bg-gray-400 disabled:cursor-not-allowed",children:T?"Generating...":"Generate Link"}),_&&(0,a.jsxs)("div",{className:"mt-4 p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[a.jsx(U.Z,{className:"w-4 h-4 text-green-600 dark:text-green-400"}),a.jsx("p",{className:"text-sm font-medium text-green-800 dark:text-green-300",children:"Invitation link generated successfully!"})]}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:"Share this link with a new teacher to give them access:"}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"text",value:_,readOnly:!0,className:"flex-1 px-3 py-2 text-sm rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-neutral-700 focus:outline-none focus:ring-2 focus:ring-sky-500"}),a.jsx(Tooltip,{text:"Copy to clipboard",children:a.jsx("button",{onClick:()=>{navigator.clipboard.writeText(_),R(!0),setTimeout(()=>R(!1),1500)},className:`px-4 py-2 rounded-lg font-semibold text-base transition-all duration-200 ${L?"bg-green-600 text-white":"bg-sky-600 text-white hover:bg-sky-700 focus:outline-none focus:ring-2 focus:ring-sky-500"}`,children:L?"Copied!":"Copy"})})]})]})]})]}):"manage-permissions"===e.id&&f?.isAdmin?s=(0,a.jsxs)("div",{className:"bg-white dark:bg-neutral-800 rounded-lg shadow p-6",children:[a.jsx("div",{className:"flex items-center mb-4",children:a.jsx("h2",{className:"text-lg font-semibold",children:"Manage User Permissions"})}),a.jsx("div",{className:"space-y-4",children:ei?(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:"text-md font-medium",children:"Permissions Manager"}),a.jsx("button",{onClick:()=>en(!1),className:"px-4 py-2 rounded-lg font-semibold text-base bg-gray-600 text-white hover:bg-gray-700",children:"Close Manager"})]}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"Search below to find users you have invited and manage their permissions."}),(0,a.jsxs)("div",{className:"relative",children:[a.jsx("input",{type:"text",value:F,onChange:e=>P(e.target.value),placeholder:"Search for a teacher by name...",className:"w-full px-3 py-2 border border-neutral-300 dark:border-gray-600 rounded-lg bg-white dark:bg-neutral-700 text-gray-900 dark:text-gray-200 focus:ring-2 focus:ring-sky-500 focus:border-sky-500"}),a.jsx(k.Z,{className:"absolute right-3 top-2.5 text-gray-400"})]}),a.jsx("div",{className:"mt-4",children:!V&&a.jsx("div",{className:"space-y-4",children:(()=>{let e=F.trim()?ek:ek.filter(e=>e.isAdmin||e.isRecommender);return 0===e.length?(0,a.jsxs)("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[a.jsx("p",{children:"No users found."}),a.jsx("p",{className:"text-sm mt-1",children:F.trim()?"No users match your search.":"No users with privileges yet. Use search to find and grant privileges to invited users."})]}):e.map(e=>a.jsx("div",{className:"p-4 border rounded-md",children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"font-semibold",children:e.name}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:e.email}),(e.isAdmin||e.isRecommender)&&a.jsx("p",{className:"text-xs text-blue-600 dark:text-blue-400 mt-1",children:e.isAdmin&&e.isRecommender?"Admin & Recommender":e.isAdmin?"Admin":"Recommender"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx("label",{className:"text-sm font-medium",children:"Recommender:"}),a.jsx("button",{onClick:()=>toggleUserStatus(e,"isRecommender"),className:`relative inline-flex items-center h-6 rounded-full w-11 ${e.isRecommender?"bg-sky-600 hover:bg-sky-800":"bg-gray-300 hover:bg-gray-500"}`,children:a.jsx("span",{className:`inline-block w-4 h-4 transform bg-white rounded-full transition-transform ${e.isRecommender?"translate-x-6":"translate-x-1"}`})})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx("label",{className:"text-sm font-medium",children:"Admin:"}),a.jsx("button",{onClick:()=>toggleUserStatus(e,"isAdmin"),className:`relative inline-flex items-center h-6 rounded-full w-11 ${e.isAdmin?"bg-sky-600 hover:bg-sky-800":"bg-gray-300 hover:bg-gray-500"}`,children:a.jsx("span",{className:`inline-block w-4 h-4 transform bg-white rounded-full transition-transform ${e.isAdmin?"translate-x-6":"translate-x-1"}`})})]})]})]})},e.$id))})()})})]}):a.jsx("button",{onClick:()=>en(!0),className:"w-full px-4 py-2 rounded-lg font-semibold text-base bg-sky-600 text-white hover:bg-sky-800 disabled:bg-gray-400 disabled:cursor-not-allowed",children:"Open Permissions Manager"})})]}):"feedback-manager"===e.id&&ej?s=(0,a.jsxs)("div",{className:"bg-white dark:bg-neutral-800 rounded-lg shadow p-6",children:[a.jsx("div",{className:"flex items-center mb-4",children:a.jsx("h2",{className:"text-lg font-semibold",children:"Feedback Manager"})}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"Manage user feedback and track resolution status for all submitted feedback."}),a.jsx("div",{className:"space-y-4",children:er?(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:"text-md font-medium",children:"Feedback Manager"}),a.jsx("button",{onClick:()=>el(!1),className:"px-4 py-2 rounded-lg font-semibold text-base bg-gray-600 text-white hover:bg-gray-700",children:"Close Manager"})]}),a.jsx("div",{className:"rounded-lg p-4 bg-neutral-900",children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex flex-wrap gap-4 p-4 bg-white dark:bg-neutral-700 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx("label",{className:"text-sm font-medium",children:"Status:"}),(0,a.jsxs)("select",{value:ed,onChange:e=>eo(e.target.value),className:"px-3 py-1 border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-neutral-800",children:[a.jsx("option",{value:"all",children:"All"}),a.jsx("option",{value:"open",children:"Open"}),a.jsx("option",{value:"resolved",children:"Resolved"})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx("label",{className:"text-sm font-medium",children:"Category:"}),(0,a.jsxs)("select",{value:ec,onChange:e=>ex(e.target.value),className:"px-3 py-1 border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-neutral-800",children:[a.jsx("option",{value:"all",children:"All"}),a.jsx("option",{value:"bug",children:"Issue/Bug"}),a.jsx("option",{value:"feature",children:"Feature/Enhancement"}),a.jsx("option",{value:"question",children:"Question"}),a.jsx("option",{value:"other",children:"Other"})]})]})]}),Q?a.jsx("div",{className:"text-center py-4",children:"Loading feedback..."}):0===ew.length?a.jsx("div",{className:"text-center py-4 text-gray-500",children:"No feedback matches the current filters."}):a.jsx("div",{className:"space-y-4",children:ew.map(e=>(0,a.jsxs)("div",{className:"border dark:border-neutral-600 rounded-lg p-4 bg-white dark:bg-neutral-800",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx("span",{className:"font-medium text-sm",children:e.username||e.name||"Anonymous User"}),a.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:new Date(e.$createdAt).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}),e.email&&(0,a.jsxs)("div",{className:"text-xs text-gray-600 dark:text-gray-400 mb-2",children:["\uD83D\uDCE7 ",e.email]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[e.category&&a.jsx("select",{value:e.category,onChange:t=>handleUpdateFeedbackCategory(e.$id,t.target.value),className:`px-2 py-1 rounded-md text-xs font-medium ${"bug"===e.category?"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200":"feature"===e.category?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200":"question"===e.category?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200":"other"===e.category?"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200":"bg-neutral-200 text-gray-800 dark:bg-neutral-700 dark:text-gray-200"}`,children:es.map(e=>a.jsx("option",{value:e.value,children:e.label},e.value))}),a.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-md text-xs font-medium bg-neutral-200 text-gray-800 dark:bg-neutral-700 dark:text-gray-200",children:e.status||"pending"})]})]}),(0,a.jsxs)("div",{className:"mb-3",children:[a.jsx("h4",{className:"text-sm font-medium text-gray-800 dark:text-gray-200 mb-2",children:"Feedback Description:"}),a.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300 leading-relaxed whitespace-pre-wrap",children:e.message||e.description||"No description provided"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 pt-2 border-t border-gray-200 dark:border-gray-600",children:[a.jsx("button",{onClick:()=>handleUpdateFeedbackStatus(e.$id,"in-progress"),className:"px-3 py-1 rounded-lg font-semibold text-sm bg-neutral-200 text-gray-800 hover:bg-neutral-300 dark:bg-neutral-700 dark:text-gray-200 dark:hover:bg-neutral-600",title:"Mark as In Progress",children:"In Progress"}),a.jsx("button",{onClick:()=>handleUpdateFeedbackStatus(e.$id,"resolved"),className:"px-3 py-1 rounded-lg font-semibold text-sm bg-neutral-200 text-gray-800 hover:bg-neutral-300 dark:bg-neutral-700 dark:text-gray-200 dark:hover:bg-neutral-600",title:"Mark as Resolved",children:"Resolved"}),a.jsx("button",{onClick:()=>handleUpdateFeedbackStatus(e.$id,"closed"),className:"px-3 py-1 rounded-lg font-semibold text-sm bg-neutral-200 text-gray-800 hover:bg-neutral-300 dark:bg-neutral-700 dark:text-gray-200 dark:hover:bg-neutral-600",title:"Mark as Closed",children:"Closed"}),a.jsx("div",{className:"ml-auto",children:a.jsx("button",{onClick:()=>{ee(!0),ea(e)},className:"p-2 rounded-full bg-white dark:bg-neutral-800 hover:bg-neutral-900 dark:hover:bg-neutral-900 transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-red-400 focus:ring-offset-2 focus:ring-offset-white dark:focus:ring-offset-neutral-900",title:"Delete Feedback","aria-label":"Delete Feedback",children:a.jsx(z.Z,{className:"w-5 h-5 text-red-600 dark:text-red-400"})})})]})]},e.$id))})]})})]}):a.jsx("button",{onClick:()=>el(!0),className:"w-full px-4 py-2 rounded-lg font-semibold text-base bg-sky-600 text-white hover:bg-sky-800 disabled:bg-gray-400 disabled:cursor-not-allowed",children:"Open Feedback Manager"})})]}):"edit-about"===e.id&&f?.isAdmin&&(s=(0,a.jsxs)("div",{className:"bg-white dark:bg-neutral-800 rounded-lg shadow p-6",children:[a.jsx("div",{className:"flex items-center mb-4",children:a.jsx("h2",{className:"text-lg font-semibold",children:"Edit About Page"})}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"Manage the content displayed on the About page for all users."}),a.jsx("div",{className:"space-y-4",children:q?(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:"text-md font-medium",children:"About Page Editor"}),a.jsx("button",{onClick:()=>O(!1),className:"px-4 py-2 rounded-lg font-semibold text-base bg-gray-600 text-white hover:bg-gray-700",children:"Close Editor"})]}),a.jsx("div",{className:"border border-gray-300 dark:border-gray-600 rounded-lg p-4 bg-gray-50 dark:bg-gray-800",children:a.jsx(EditableAboutView,{})})]}):a.jsx("button",{onClick:()=>O(!0),className:"w-full px-4 py-2 rounded-lg font-semibold text-base bg-sky-600 text-white hover:bg-sky-800 disabled:bg-gray-400 disabled:cursor-not-allowed",children:"Open About Page Editor"})})]})),s)?a.jsx(W._l,{draggableId:e.id,index:t,isDragDisabled:!o,children:e=>(0,a.jsxs)("div",{ref:e.innerRef,...e.draggableProps,className:"flex items-center",children:[o&&a.jsx("div",{...e.dragHandleProps,className:"flex items-center pl-1 pr-2 cursor-grab active:cursor-grabbing select-none h-full",children:a.jsx(M.Z,{className:"w-5 h-5 text-gray-400"})}),a.jsx("div",{className:"flex-1",children:s})]})},e.id):null}),t.placeholder]})})}),X&&et&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-white dark:bg-neutral-800 rounded-lg p-6 max-w-md w-full mx-4",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Delete Feedback"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:"Are you sure you want to delete this feedback? This action cannot be undone."}),(0,a.jsxs)("div",{className:"flex justify-end space-x-3",children:[a.jsx("button",{onClick:()=>{ee(!1),ea(null)},className:"px-4 py-2 text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-neutral-700 rounded",children:"Cancel"}),a.jsx("button",{onClick:()=>handleDeleteFeedback(et.$id),className:"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700",children:"Delete"})]})]})})]})]})},WishlistEditView=()=>{let{wishlistId:e}=(0,i.useParams)(),[t,s]=(0,r.useState)(null),[l,d]=(0,r.useState)([]),[o,c]=(0,r.useState)([]),[b,p]=(0,r.useState)({wishlist_name:"",contact_info:""}),[j,f]=(0,r.useState)({name:"",description:"",store_link:"",cost:""}),[w,k]=(0,r.useState)(!0),[N,v]=(0,r.useState)(null),[S,C]=(0,r.useState)(null),[D,$]=(0,r.useState)(null),[A,I]=(0,r.useState)("list"),[_]=useStrictDroppable(w),E=(0,i.useNavigate)(),handleCopy=(e,t)=>{navigator.clipboard.writeText(e),v(t),setTimeout(()=>v(null),2e3)},L=(0,r.useCallback)(async e=>{try{let t=await u.getDocument(m,h,e);s(t),p({wishlist_name:t.wishlist_name||"",contact_info:t.contact_info||""});let a=await u.listDocuments(m,g,[n.AE.equal("wishlist_id",e)]);d(a.documents);let r=await u.listDocuments(m,y,[n.AE.equal("wishlist_id",e)]);c(r.documents),sessionStorage.setItem("lastVisitedWishlist",t.wishlist_key)}catch(e){E("/dashboard")}},[E]);(0,r.useEffect)(()=>{if(!e){E("/dashboard");return}let checkUser=async()=>{try{await x.get(),await L(e)}catch(e){E("/login")}finally{k(!1)}};checkUser()},[e,E,L]);let handleSettingsSave=async e=>{if(e.preventDefault(),t)try{await u.updateDocument(m,h,t.$id,b),s(e=>e?{...e,...b}:null),alert("Wishlist settings saved!")}catch(e){alert("Failed to save settings.")}},handleItemFormChange=e=>{let{name:t,value:s}=e.target;f(e=>({...e,[t]:s}))},handleAddItem=async e=>{if(e.preventDefault(),t)try{let e=await u.createDocument(m,g,n.ID.unique(),{wishlist_id:t.$id,...j,contributions:0});d(t=>[...t,e]),f({name:"",description:"",store_link:"",cost:""})}catch(e){}},handleEditItem=e=>{$(e.$id),C(e)},handleCancelEdit=()=>{$(null),C(null)},handleUpdateItem=async e=>{if(e.preventDefault(),S&&D)try{let e=await u.updateDocument(m,g,D,{name:S.name,description:S.description,store_link:S.store_link,cost:S.cost});d(t=>t.map(t=>t.$id===D?e:t)),handleCancelEdit()}catch(e){}},handleDeleteItem=async e=>{try{await u.deleteDocument(m,g,e),d(t=>t.filter(t=>t.$id!==e))}catch(e){}},handleDuplicateItem=async e=>{if(t){console.log("Duplicating item:",e.name);try{let s=`${e.name}(copy)`,a=await u.createDocument(m,g,n.ID.unique(),{wishlist_id:t.$id,name:s,description:e.description,store_link:e.store_link,cost:e.cost,contributions:0});d(e=>[...e,a]),console.log("Item duplicated successfully:",s)}catch(e){console.error("Error duplicating item:",e),alert("Failed to duplicate item. Please try again.")}}},handleApproveSuggestion=async e=>{if(t)try{let s=await u.createDocument(m,g,n.ID.unique(),{wishlist_id:t.$id,name:e.itemName,description:e.description,store_link:e.storeLink,cost:e.estimatedCost,contributions:0});d(e=>[...e,s]),await u.deleteDocument(m,y,e.$id),c(t=>t.filter(t=>t.$id!==e.$id))}catch(e){}},handleDeclineSuggestion=async e=>{try{await u.deleteDocument(m,y,e),c(t=>t.filter(t=>t.$id!==e))}catch(e){}};return(0,a.jsxs)("div",{className:"min-h-screen bg-neutral-100 dark:bg-neutral-900 text-gray-800 dark:text-gray-200",children:[a.jsx(Header,{title:"Manage wiSHlist",showBackButton:!0,showInfoButton:!0,isLoading:w}),(0,a.jsxs)("main",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8 grid grid-cols-1 md:grid-cols-3 gap-8",children:[(0,a.jsxs)("div",{className:"md:col-span-2 space-y-8",children:[(0,a.jsxs)("div",{className:"bg-white dark:bg-neutral-800 rounded-lg shadow p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-200 mb-4",children:"Add New Item"}),(0,a.jsxs)("form",{onSubmit:handleAddItem,className:"space-y-4",children:[a.jsx("input",{type:"text",name:"name",placeholder:"Item Name",value:j.name,onChange:handleItemFormChange,className:"w-full p-2 rounded bg-neutral-200 dark:bg-neutral-700 dark:border-neutral-600 text-gray-900 dark:text-gray-200 focus:outline-none",required:!0}),a.jsx("textarea",{name:"description",placeholder:"Description",value:j.description,onChange:handleItemFormChange,className:"w-full p-2 rounded bg-neutral-200 dark:bg-neutral-700 dark:border-neutral-600 text-gray-900 dark:text-gray-200 focus:outline-none"}),a.jsx("input",{type:"url",name:"store_link",placeholder:"Store Link (optional)",value:j.store_link,onChange:handleItemFormChange,className:"w-full p-2 rounded bg-neutral-200 dark:bg-neutral-700 text-gray-900 dark:text-gray-200 focus:outline-none"}),a.jsx("input",{type:"text",name:"cost",placeholder:"Cost (e.g., $12.99)",value:j.cost,onChange:handleItemFormChange,className:"w-full p-2 rounded bg-neutral-200 dark:bg-neutral-700 text-gray-900 dark:text-gray-200 focus:outline-none"}),a.jsx("button",{type:"submit",className:"w-full bg-green-600 text-white py-2 px-4 rounded-lg hover:bg-green-700 dark:hover:bg-green-900",children:"Add to wiSHlist"})]})]}),o.length>0&&(0,a.jsxs)("div",{className:"bg-white dark:bg-neutral-800 rounded-lg shadow p-6",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-200 mb-4",children:["Pending Suggestions (",o.length,")"]}),a.jsx("div",{className:"space-y-4",children:o.map(e=>a.jsx("div",{className:"bg-white dark:bg-neutral-800 border-2 border-amber-500 dark:border-amber-800 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{children:[a.jsx("h4",{className:"font-semibold text-gray-900 dark:text-gray-200 text-lg",children:e.itemName}),e.description&&a.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm mt-1",children:e.description}),(0,a.jsxs)("div",{className:"flex items-center space-x-4 text-sm mt-2",children:[e.estimatedCost&&a.jsx("span",{className:"text-green-600 font-medium text-lg",children:e.estimatedCost}),e.storeLink&&a.jsx("a",{href:e.storeLink,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:"View Item"})]})]}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[a.jsx(Tooltip,{text:"Approve Suggestion",children:a.jsx("button",{onClick:()=>handleApproveSuggestion(e),className:"p-2 bg-green-600 hover:bg-green-700 dark:bg-green-700 dark:hover:bg-green-800 rounded-full",children:a.jsx(U.Z,{size:20,className:"text-white"})})}),a.jsx(Tooltip,{text:"Decline Suggestion",children:a.jsx("button",{onClick:()=>handleDeclineSuggestion(e.$id),className:"p-2 bg-red-600 hover:bg-red-700 dark:bg-red-700 dark:hover:bg-red-800 rounded-full",children:a.jsx(F.Z,{size:20,className:"text-white"})})})]})]})},e.$id))})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("h3",{className:"text-xl font-bold text-gray-800 dark:text-gray-200",children:["Your Items (",l.length,")"]}),(0,a.jsxs)("div",{className:"hidden md:flex items-center space-x-2",children:[a.jsx(Tooltip,{text:"List View",children:a.jsx("button",{onClick:()=>I("list"),className:`p-2 rounded-md transition-colors ${"list"===A?"bg-sky-600 text-white hover:bg-sky-800":"bg-gray-200 dark:bg-neutral-700 text-gray-600 dark:text-gray-300 hover:bg-gray-400 dark:hover:bg-neutral-500"}`,children:a.jsx(Q.Z,{className:"w-5 h-5"})})}),a.jsx(Tooltip,{text:"Grid View",children:a.jsx("button",{onClick:()=>I("grid"),className:`p-2 rounded-md transition-colors ${"grid"===A?"bg-sky-600 text-white hover:bg-sky-800":"bg-gray-200 dark:bg-neutral-700 text-gray-600 dark:text-gray-300 hover:bg-gray-400 dark:hover:bg-neutral-500"}`,children:a.jsx(J.Z,{className:"w-5 h-5"})})})]})]}),a.jsx(W.Z5,{onDragEnd:e=>{let{destination:t,source:s}=e;if(!t||t.droppableId===s.droppableId&&t.index===s.index)return;let a=Array.from(l),[r]=a.splice(s.index,1);a.splice(t.index,0,r),d(a)},children:_&&a.jsx(W.bK,{droppableId:"wishlist-items",children:e=>(0,a.jsxs)("div",{...e.droppableProps,ref:e.innerRef,className:`grid gap-6 ${"grid"===A?"grid-cols-1 md:grid-cols-2":"grid-cols-1"}`,children:[l.map((e,t)=>a.jsx(W._l,{draggableId:e.$id,index:t,children:t=>a.jsx("div",{ref:t.innerRef,...t.draggableProps,className:"bg-white dark:bg-neutral-800 rounded-lg shadow p-4 flex flex-col justify-between transition-colors duration-200 group",children:D===e.$id?(0,a.jsxs)("form",{onSubmit:handleUpdateItem,className:"space-y-4",children:[a.jsx("input",{type:"text",name:"name",value:S?.name||"",onChange:e=>C(t=>({...t,name:e.target.value})),className:"w-full p-2 rounded bg-neutral-200 dark:bg-neutral-700 dark:border-neutral-600 text-gray-900 dark:text-gray-200 focus:outline-none",required:!0}),a.jsx("textarea",{name:"description",value:S?.description||"",onChange:e=>C(t=>({...t,description:e.target.value})),className:"w-full p-2 rounded bg-neutral-200 dark:bg-neutral-700 dark:border-neutral-600 text-gray-900 dark:text-gray-200 focus:outline-none"}),a.jsx("input",{type:"url",name:"store_link",value:S?.store_link||"",onChange:e=>C(t=>({...t,store_link:e.target.value})),className:"w-full p-2 rounded bg-neutral-200 dark:bg-neutral-700 text-gray-900 dark:text-gray-200 focus:outline-none"}),a.jsx("input",{type:"text",name:"cost",value:S?.cost||"",onChange:e=>C(t=>({...t,cost:e.target.value})),className:"w-full p-2 rounded bg-neutral-200 dark:bg-neutral-700 text-gray-900 dark:text-gray-200 focus:outline-none"}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[a.jsx("button",{type:"submit",className:"flex-grow bg-green-600 text-white py-2 px-4 rounded-lg hover:bg-green-700 dark:hover:bg-green-900",children:"Save"}),a.jsx("button",{type:"button",onClick:handleCancelEdit,className:"flex-grow bg-gray-300 text-gray-800 py-2 px-4 rounded-lg hover:bg-gray-400",children:"Cancel"})]})]}):a.jsx(a.Fragment,{children:(0,a.jsxs)("div",{className:"flex items-center",children:[a.jsx("div",{...t.dragHandleProps,className:"p-2 cursor-grab active:cursor-grabbing",children:a.jsx(M.Z,{className:"w-5 h-5 text-black dark:text-white"})}),a.jsx("div",{className:"flex-grow",children:a.jsx("div",{className:"flex gap-3 items-start",children:(0,a.jsxs)("div",{className:"flex-grow",children:[a.jsx("h4",{className:"font-semibold text-gray-900 dark:text-gray-200 text-lg",children:e.name}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm mb-2",children:e.description}),e.cost&&a.jsx("span",{className:"text-green-600 font-medium text-lg",children:e.cost})]})})}),(0,a.jsxs)("div",{className:"flex flex-col items-end space-y-2 ml-4",children:[e.store_link&&a.jsx(Tooltip,{text:"View this item",children:a.jsx("a",{href:e.store_link,target:"_blank",rel:"noopener noreferrer",className:"p-2 rounded-full bg-transparent hover:bg-gray-200 dark:hover:bg-neutral-700 focus:outline-none transition-colors flex items-center cursor-pointer",children:a.jsx(ee.Z,{className:"w-5 h-5 text-gray-600 dark:text-gray-300"})})}),a.jsx(Tooltip,{text:"Edit this item",children:a.jsx("button",{onClick:()=>handleEditItem(e),className:"p-2 rounded-full bg-transparent hover:bg-gray-200 dark:hover:bg-neutral-700 focus:outline-none transition-colors flex items-center cursor-pointer",children:a.jsx(q.Z,{className:"w-5 h-5 text-gray-600 dark:text-gray-300"})})}),a.jsx(Tooltip,{text:"Duplicate this item",children:a.jsx("button",{onClick:()=>handleDuplicateItem(e),className:"p-2 rounded-full bg-transparent hover:bg-gray-200 dark:hover:bg-neutral-700 focus:outline-none transition-colors flex items-center cursor-pointer",children:a.jsx(V.Z,{className:"w-5 h-5 text-gray-600 dark:text-gray-300"})})}),a.jsx(Tooltip,{text:"Delete this item",children:a.jsx("button",{onClick:()=>handleDeleteItem(e.$id),className:"p-2 rounded-full bg-transparent hover:bg-gray-200 dark:hover:bg-neutral-700 focus:outline-none transition-colors flex items-center cursor-pointer",children:a.jsx(z.Z,{className:"w-5 h-5 text-red-600"})})})]})]})})})},e.$id)),e.placeholder]})})})]})]}),a.jsx("div",{className:"md:col-span-1",children:(0,a.jsxs)("div",{className:"bg-white dark:bg-neutral-800 rounded-lg shadow p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-200 mb-4",children:"wiSHlist Settings"}),(0,a.jsxs)("form",{onSubmit:handleSettingsSave,className:"space-y-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"wiSHlist Name"}),a.jsx("input",{type:"text",value:b.wishlist_name,onChange:e=>p({...b,wishlist_name:e.target.value}),className:"mt-1 w-full p-2 rounded bg-neutral-200 dark:bg-neutral-700 text-gray-900 dark:text-gray-200 focus:outline-none"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Contact Info"}),a.jsx("input",{type:"text",value:b.contact_info,onChange:e=>p({...b,contact_info:e.target.value}),className:"mt-1 w-full p-2 rounded bg-neutral-200 dark:bg-neutral-700 text-gray-900 dark:text-gray-200 focus:outline-none"})]}),a.jsx("div",{children:(0,a.jsxs)("button",{type:"submit",className:"mt-1 w-full bg-sky-600 text-white py-2 px-4 rounded-lg hover:bg-sky-800 dark:hover:bg-sky-800 flex items-center justify-center",children:[a.jsx(K.Z,{className:"w-4 h-4 mr-2"}),a.jsx(Tooltip,{text:"Save changes to your wishlist settings",children:a.jsx("span",{children:"Save Settings"})})]})})]}),(0,a.jsxs)("div",{className:"mt-6",children:[a.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Share Key"}),(0,a.jsxs)("div",{className:"mt-1 flex items-center space-x-2",children:[a.jsx("input",{type:"text",readOnly:!0,value:t?.wishlist_key||"",className:"w-full text-sm bg-gray-100 dark:bg-neutral-700 p-1 rounded text-gray-900 dark:text-gray-200 focus:outline-none"}),a.jsx(Tooltip,{text:"Copy share key",children:a.jsx("button",{onClick:()=>handleCopy(t?.wishlist_key||"","key"),className:`px-3 py-1 text-sm rounded transition-colors ${"key"===N?"bg-green-600 text-white":"bg-sky-600 text-white hover:bg-sky-800"}`,children:"key"===N?a.jsx(U.Z,{className:"w-4 h-4"}):"Copy"})})]})]}),(0,a.jsxs)("div",{className:"mt-4",children:[a.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Share Link"}),(0,a.jsxs)("div",{className:"mt-1 flex items-center space-x-2",children:[a.jsx("input",{type:"text",readOnly:!0,value:`${window.location.origin}/wishlist/${t?.wishlist_key}`,className:"w-full text-sm bg-gray-100 dark:bg-neutral-700 p-1 rounded text-gray-900 dark:text-gray-200 focus:outline-none"}),a.jsx(Tooltip,{text:"Copy share link",children:a.jsx("button",{onClick:()=>handleCopy(`${window.location.origin}/wishlist/${t?.wishlist_key}`,"link"),className:`px-3 py-1 text-sm rounded transition-colors ${"link"===N?"bg-green-600 text-white":"bg-sky-600 text-white hover:bg-sky-800"}`,children:"link"===N?a.jsx(U.Z,{className:"w-4 h-4"}):"Copy"})})]})]})]})})]})]})},SupporterLanding=()=>{let[e,t]=(0,r.useState)(""),s=(0,i.useNavigate)();return(0,a.jsxs)("div",{className:"min-h-screen bg-neutral-100 dark:bg-neutral-900",children:[a.jsx(Header,{title:"Supporter",showSettingsButton:!1,showSignoutButton:!1,showInfoButton:!0,showLoginButton:!0}),a.jsx("div",{className:"flex items-center justify-center p-4",children:(0,a.jsxs)("div",{className:"bg-white dark:bg-neutral-800 rounded-xl shadow-lg p-8 w-full max-w-md text-center",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-gray-100 mb-4",children:"Classroom wiSHlist"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Enter a teacher's wiSHlist key to view their list."}),(0,a.jsxs)("form",{onSubmit:t=>{t.preventDefault(),e.trim()&&s(`/wishlist/${e.trim()}`)},children:[a.jsx("input",{type:"text",value:e,onChange:e=>t(e.target.value),className:"w-full px-4 py-3 rounded-lg text-center text-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-200 focus:outline-none",placeholder:"Enter wiSHlist Key",required:!0}),a.jsx("button",{type:"submit",className:"mt-4 w-full bg-sky-600 text-white py-3 px-4 rounded-lg hover:bg-sky-800 font-medium",children:"Find wiSHlist"})]}),a.jsx("div",{className:"mt-8 text-sm text-gray-500 dark:text-gray-400",children:(0,a.jsxs)("p",{children:["Are you a teacher? ",a.jsx(i.Link,{to:"/",className:"text-sky-600 hover:underline",children:"Login here"})]})})]})})]})},SupporterView=()=>{let{wishlistKey:e}=(0,i.useParams)(),[t,s]=(0,r.useState)(null),[l,d]=(0,r.useState)([]),[o,c]=(0,r.useState)({itemName:"",description:"",storeLink:"",estimatedCost:""}),[x,b]=(0,r.useState)("Submit Suggestion"),[p,j]=(0,r.useState)(!0),[f,w]=(0,r.useState)(""),[k,N]=(0,r.useState)(!1),[v,S]=(0,r.useState)("list"),C=(0,i.useNavigate)(),D=(0,r.useCallback)(async e=>{let t=e.trim();w("");try{let e=await u.listDocuments(m,h,[n.AE.equal("wishlist_key",t)]);if(e.documents.length>0){let a=e.documents[0];s(a);let r=await u.listDocuments(m,g,[n.AE.equal("wishlist_id",a.$id)]);d(r.documents),sessionStorage.setItem("lastVisitedWishlist",t)}else w("No wishlist found with that key. Please check the key and try again.")}catch(e){w(`Failed to fetch wishlist: ${e.message||"Unknown error"}. Please try again.`)}finally{j(!1)}},[]);(0,r.useEffect)(()=>{if(!e){C("/");return}D(e)},[e,C,D]);let handleMarkContribution=async e=>{try{let t=e.contributions+1;await u.updateDocument(m,g,e.$id,{contributions:t}),d(s=>s.map(s=>s.$id===e.$id?{...s,contributions:t}:s))}catch(e){alert("Could not mark contribution. Please try again.")}},handleSuggestionFormChange=e=>{let{name:t,value:s}=e.target;c(e=>({...e,[t]:s}))},handleSuggestionSubmit=async e=>{if(e.preventDefault(),t)try{await u.createDocument(m,y,n.ID.unique(),{wishlist_id:t.$id,...o,status:"pending",requestedBy:"Anonymous"}),b("Submitted for Review"),setTimeout(()=>{b("Submit Suggestion")},3e3),N(!0),setTimeout(()=>N(!1),3e3),c({itemName:"",description:"",storeLink:"",estimatedCost:""})}catch(e){alert("Could not submit suggestion. Please try again.")}};return f?(0,a.jsxs)("div",{className:"min-h-screen bg-neutral-100 dark:bg-neutral-900 flex flex-col items-center justify-center text-center p-4",children:[a.jsx("h1",{className:"text-2xl font-bold text-red-600",children:"Error"}),a.jsx("p",{className:"text-gray-700 dark:text-gray-300 mt-4",children:f}),a.jsx("button",{onClick:()=>e&&C(`/wishlist/${e}`),className:"mt-6 bg-sky-600 text-white px-6 py-2 rounded-lg hover:bg-sky-800",children:"Return to Wishlist"})]}):(0,a.jsxs)("div",{className:"min-h-screen bg-neutral-100 dark:bg-neutral-900",children:[a.jsx(Header,{title:"wiSHlist",showSettingsButton:!1,showSignoutButton:!1,showSearch:!0,showInfoButton:!0,isLoading:p}),(0,a.jsxs)("main",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,a.jsxs)("div",{className:"text-center mb-8",children:[(0,a.jsxs)("h2",{className:"text-2xl font-bold text-gray-800 dark:text-gray-100 mb-2",children:["Help ",t?.teacher_name,"'s Students Learn & Grow"]}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Your contributions make a real difference in our classroom. Thank you for supporting education!"}),t?.contact_info&&(0,a.jsxs)("p",{className:"mt-2 text-sm text-gray-500 dark:text-gray-400",children:[a.jsx("strong",{children:"Contact:"})," ",t.contact_info]})]}),(0,a.jsxs)("div",{className:"space-y-8 bg-white dark:bg-neutral-900 rounded-lg shadow p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsxs)("h3",{className:"text-xl font-bold text-gray-800 dark:text-gray-200",children:["Classroom Needs (",l.length," items)"]}),(0,a.jsxs)("div",{className:"hidden md:flex items-center space-x-2",children:[a.jsx(Tooltip,{text:"List View",children:a.jsx("button",{onClick:()=>S("list"),className:`p-2 rounded-md transition-colors ${"list"===v?"bg-sky-600 text-white hover:bg-sky-800":"bg-gray-200 dark:bg-neutral-700 text-gray-600 dark:text-gray-300 hover:bg-gray-400 dark:hover:bg-neutral-500"}`,children:a.jsx(Q.Z,{className:"w-5 h-5"})})}),a.jsx(Tooltip,{text:"Grid View",children:a.jsx("button",{onClick:()=>S("grid"),className:`p-2 rounded-md transition-colors ${"grid"===v?"bg-sky-600 text-white hover:bg-sky-800":"bg-gray-200 dark:bg-neutral-700 text-gray-600 dark:text-gray-300 hover:bg-gray-400 dark:hover:bg-neutral-500"}`,children:a.jsx(J.Z,{className:"w-5 h-5"})})})]})]}),a.jsx("div",{className:`grid gap-6 ${"grid"===v?"grid-cols-1 md:grid-cols-2":"grid-cols-1"}`,children:l.length>0?l.map(e=>(0,a.jsxs)("div",{className:"bg-white dark:bg-neutral-800 rounded-lg shadow hover:shadow-md transition-shadow p-6 flex flex-col justify-between w-full",children:[a.jsx("div",{children:a.jsx("div",{className:"mb-3",children:(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"text-xl font-semibold text-gray-800 dark:text-gray-100 mb-2",children:e.name}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:e.description})]})})}),(0,a.jsxs)("div",{className:"mt-4 w-full",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[e.cost&&a.jsx("span",{className:"text-green-600 dark:text-green-400 font-medium text-lg",children:e.cost}),(0,a.jsxs)("span",{className:"text-blue-600 dark:text-blue-400 flex items-center text-sm",children:[a.jsx(X.Z,{className:"w-4 h-4 mr-1"}),e.contributions," contributions"]})]}),(0,a.jsxs)("div",{className:"flex gap-2 w-full justify-between",children:[a.jsx("div",{className:"flex-none",children:a.jsx(Tooltip,{text:"Opens in a new tab",children:(0,a.jsxs)("a",{href:e.store_link||"#",target:e.store_link?"_blank":void 0,rel:e.store_link?"noopener noreferrer":void 0,className:`${e.store_link?"bg-green-600 hover:bg-green-800":"bg-gray-400 cursor-not-allowed"} text-white px-12 xs:px-6 py-2 rounded-lg transition duration-200 flex items-center justify-center text-sm font-medium`,children:[a.jsx("span",{className:"hidden xs:inline",children:"Purchase"})," ",a.jsx(ee.Z,{className:"w-4 h-4 xs:ml-2"})]})})}),a.jsx("div",{className:"flex-none",children:a.jsx(Tooltip,{text:"Let the teacher know you've purchased this item",children:(0,a.jsxs)("button",{onClick:()=>handleMarkContribution(e),className:"bg-sky-600 text-white px-12 xs:px-6 py-2 rounded-lg hover:bg-sky-800 transition duration-200 flex items-center justify-center text-sm font-medium",children:[a.jsx(et.Z,{className:"w-4 h-4 xs:mr-2"}),a.jsx("span",{className:"hidden xs:inline",children:"I bought this"})]})})})]})]})]},e.$id)):a.jsx("div",{className:"text-center py-10 bg-white dark:bg-neutral-800 rounded-lg shadow",children:a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"This wiSHlist is empty!"})})}),a.jsx("div",{className:`bg-white dark:bg-neutral-800 rounded-lg shadow transition-all duration-500 ${k?"border-2 border-purple-500":"border-2 border-transparent"}`,children:(0,a.jsxs)("div",{className:`rounded-lg p-6 transition-colors duration-500 ${k?"bg-purple-100/30 dark:bg-purple-900/30":""}`,children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-100 mb-4",children:"Suggest a New Item"}),(0,a.jsxs)("form",{onSubmit:handleSuggestionSubmit,className:"space-y-4",children:[a.jsx("input",{type:"text",name:"itemName",placeholder:"Item Name",value:o.itemName,onChange:handleSuggestionFormChange,className:"w-full p-2 rounded bg-white dark:bg-neutral-700 text-gray-900 dark:text-gray-200 focus:outline-none",required:!0}),a.jsx("textarea",{name:"description",placeholder:"Description",value:o.description,onChange:handleSuggestionFormChange,className:"w-full p-2 rounded bg-white dark:bg-neutral-700 text-gray-900 dark:text-gray-200 focus:outline-none"}),a.jsx("input",{type:"url",name:"storeLink",placeholder:"Store Link (optional)",value:o.storeLink,onChange:handleSuggestionFormChange,className:"w-full p-2 rounded bg-white dark:bg-neutral-700 text-gray-900 dark:text-gray-200 focus:outline-none"}),a.jsx("input",{type:"text",name:"estimatedCost",placeholder:"Estimated Cost (e.g., $15.00)",value:o.estimatedCost,onChange:handleSuggestionFormChange,className:"w-full p-2 rounded bg-white dark:bg-neutral-700 text-gray-900 dark:text-gray-200 focus:outline-none"}),a.jsx("button",{type:"submit",className:"w-full bg-purple-700 text-white py-2 px-4 rounded-lg hover:bg-purple-900",children:x})]})]})})]})]})]})};var ea=s(8633);let Issues=()=>{let[e,t]=(0,r.useState)([]),[s,l]=(0,r.useState)(!1),[n,d]=(0,r.useState)("all"),[o,c]=(0,r.useState)("all"),[x,h]=(0,r.useState)(""),{user:g}=useAuth(),b=(0,i.useNavigate)(),p=(0,r.useCallback)(async()=>{l(!0);try{let e=await u.listDocuments(m,j);t(e.documents)}catch(e){console.error("Error fetching feedback:",e)}finally{l(!1)}},[]),y=e.filter(e=>{let t="all"===n||e.status===n,s="all"===o||e.category===o,a=""===x.trim()||e.description&&e.description.toLowerCase().includes(x.toLowerCase())||e.message&&e.message.toLowerCase().includes(x.toLowerCase());return t&&s&&a});return(0,r.useEffect)(()=>{p()},[p]),(0,a.jsxs)("div",{className:"min-h-screen bg-neutral-100 dark:bg-neutral-900 text-gray-800 dark:text-gray-200",children:[a.jsx(Header,{title:"Current Issues",showBackButton:!0,onBack:g?()=>{b("/dashboard")}:()=>{let e=sessionStorage.getItem("lastVisitedWishlist");e?b(`/wishlist/${e}`):b("/supporter")},showSettingsButton:!!g,showInfoButton:!0,isLoading:s,hideIssuesButton:!0,showLoginButton:!0}),a.jsx("main",{className:"max-w-2xl mx-auto px-4 sm:px-6 lg:px-8 py-8 space-y-8",children:(0,a.jsxs)("div",{className:"bg-white dark:bg-neutral-800 rounded-lg shadow p-6",children:[(0,a.jsxs)("h2",{className:"text-lg font-semibold mb-4 flex items-center",children:[a.jsx(ea.Z,{className:"w-5 h-5 mr-2"}),"Current Issues"]}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"View and manage reported issues."}),(0,a.jsxs)("div",{className:"relative mb-4",children:[a.jsx("input",{type:"text",value:x,onChange:e=>h(e.target.value),placeholder:"Search issues by description...",className:"w-full px-3 py-2 border border-neutral-300 dark:border-gray-600 rounded-lg bg-white dark:bg-neutral-700 text-gray-900 dark:text-gray-200 focus:ring-2 focus:ring-sky-500 focus:border-sky-500"}),a.jsx(k.Z,{className:"absolute right-3 top-2.5 text-gray-400"})]}),a.jsx("div",{className:"space-y-4",children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex flex-col xs:flex-row xs:flex-wrap gap-4 p-4 bg-white dark:bg-neutral-700 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 w-full xs:w-auto",children:[a.jsx("label",{className:"text-sm font-medium whitespace-nowrap",children:"Status:"}),(0,a.jsxs)("select",{value:n,onChange:e=>d(e.target.value),className:"flex-1 xs:flex-none px-3 py-1 border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-neutral-800",children:[a.jsx("option",{value:"all",children:"All"}),a.jsx("option",{value:"new",children:"New"}),a.jsx("option",{value:"in-progress",children:"In Progress"}),a.jsx("option",{value:"resolved",children:"Resolved"}),a.jsx("option",{value:"closed",children:"Closed"})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 w-full xs:w-auto",children:[a.jsx("label",{className:"text-sm font-medium whitespace-nowrap",children:"Category:"}),(0,a.jsxs)("select",{value:o,onChange:e=>c(e.target.value),className:"flex-1 xs:flex-none px-3 py-1 border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-neutral-800",children:[a.jsx("option",{value:"all",children:"All"}),a.jsx("option",{value:"bug",children:"Issue/Bug"}),a.jsx("option",{value:"feature",children:"Feature/Enhancement"}),a.jsx("option",{value:"question",children:"Question"}),a.jsx("option",{value:"other",children:"Other"})]})]})]}),s?a.jsx("div",{className:"text-center py-4",children:"Loading issues..."}):0===y.length?a.jsx("div",{className:"text-center py-4 text-gray-500",children:"No issues match the current filters."}):a.jsx("div",{className:"space-y-4",children:y.map(e=>(0,a.jsxs)("div",{className:"border dark:border-neutral-600 rounded-lg p-4 bg-white dark:bg-neutral-800",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx("span",{className:"font-medium text-sm",children:e.username||e.name||"Anonymous User"}),a.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:new Date(e.$createdAt).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}),e.email&&(0,a.jsxs)("div",{className:"text-xs text-gray-600 dark:text-gray-400 mb-2",children:["\uD83D\uDCE7 ",e.email]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[e.category&&a.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-md text-xs font-medium ${"bug"===e.category?"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200":"feature"===e.category?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200":"question"===e.category?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200":"other"===e.category?"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200":"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200"}`,children:e.category}),a.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-md text-xs font-medium ${"resolved"===e.status?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"in-progress"===e.status?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200":"closed"===e.status?"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200"}`,children:e.status||"pending"})]})]}),(0,a.jsxs)("div",{className:"mb-3",children:[a.jsx("h4",{className:"text-sm font-medium text-gray-800 dark:text-gray-200 mb-2",children:"Issue Description:"}),a.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300 leading-relaxed whitespace-pre-wrap",children:e.message||e.description||"No description provided"})]})]},e.$id))})]})})]})})]})},useNavigationProgress=()=>{let[e,t]=(0,r.useState)(!1),s=(0,i.useLocation)();return(0,r.useEffect)(()=>{t(!0);let e=setTimeout(()=>{t(!1)},300);return()=>clearTimeout(e)},[s.pathname]),e},AppContent=()=>{let e=(0,i.useNavigate)(),[t]=(0,i.useSearchParams)(),s=useNavigationProgress();return(0,r.useEffect)(()=>{let s=t.get("redirect");s&&setTimeout(()=>{e(`/${s}`)},100)},[e,t]),(0,a.jsxs)(a.Fragment,{children:[a.jsx(LoadingBar,{isLoading:s}),(0,a.jsxs)(i.Routes,{children:[a.jsx(i.Route,{path:"/issues",element:a.jsx(Issues,{})})," ",(0,a.jsxs)(i.Route,{element:a.jsx(auth_PublicRoute,{}),children:[a.jsx(i.Route,{path:"/",element:a.jsx(LoginView,{})})," ",a.jsx(i.Route,{path:"/login",element:a.jsx(LoginView,{})})," ",a.jsx(i.Route,{path:"/register",element:a.jsx(RegisterView,{})}),a.jsx(i.Route,{path:"/about",element:a.jsx(AboutView,{})})," ",a.jsx(i.Route,{path:"/supporter",element:a.jsx(SupporterLanding,{})})," ",a.jsx(i.Route,{path:"/wishlist/:wishlistKey",element:a.jsx(SupporterView,{})})]}),(0,a.jsxs)(i.Route,{element:a.jsx(auth_PrivateRoute,{}),children:[a.jsx(i.Route,{path:"/dashboard",element:a.jsx(TeacherDashboard,{})}),a.jsx(i.Route,{path:"/settings",element:a.jsx(teacher_Settings,{})}),a.jsx(i.Route,{path:"/wishlist/:wishlistId/edit",element:a.jsx(WishlistEditView,{})})]})]})]})},src_App=()=>a.jsx(ThemeProvider,{children:a.jsx(AuthProvider,{children:a.jsx(i.BrowserRouter,{children:a.jsx(AppContent,{})})})});function ReactApp(){return a.jsx(src_App,{})}s(9752)},9752:()=>{}};